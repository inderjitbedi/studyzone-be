"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[591],{591:(jt,I,a)=>{a.r(I),a.d(I,{CourseModule:()=>Ht});var d=a(6895),s=a(7155),u=a(9938),S=a(9302),c=a(4006),_=a(7368),O=a(8372),e=a(4650),C=a(8606),x=a(3263),N=a(2510),v=a(5412),g=a(9549),w=a(4144),b=a(4859),Z=a(4850),k=a(3683),A=a(7392),Y=a(6709),J=a(4385),D=a(3238);function R(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function H(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Course name already exists. "),e.qZA())}function j(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Course name can only be alpha-numeric. "),e.qZA())}function z(n,o){if(1&n&&(e.TgZ(0,"mat-hint",20),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("",t.nameMaxLength-t.courseForm.controls.name.value.length," ",t.nameMaxLength-t.courseForm.controls.name.value.length>1?"characters":"character"," left.")}}function V(n,o){if(1&n&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function B(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function G(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-toolbar",22)(1,"div",23)(2,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.saveCourse())}),e._uU(3,"Save"),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.matDialog.close())}),e._uU(5,"Cancel"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.courseForm.invalid||t.apiCallActive)}}let $=(()=>{class n{constructor(t,i,l,r,m,p,f){this.matDialog=t,this.data=i,this.apiService=l,this.errorHandlingService=r,this.matcher=m,this.fb=p,this.alertService=f,this.toggle=!1,this.apiCallActive=!1,this.nameMaxLength=50,this.courseList=[],this.color="#039ee3",this.isUnique=!0,this.fileObject={},this.uploadingInProgess=!1,this.attachment=null,this.types=[{value:"public",name:"Public"},{value:"private",name:"Private"},{value:"paid",name:"Paid"}],this.isViewOnly=i.isViewOnly,this.courseForm=this.fb.group({name:[i.name||"",[c.kI.required,c.kI.pattern("^[a-zA-Z0-9 s]*$")]],type:[i.type||"public",c.kI.required],description:[i.description||"",c.kI.required],isPublished:[i.isPublished]}),i._id&&(this.courseId=i._id||null),this.courseForm.controls.name.valueChanges.pipe((0,O.b)(500)).subscribe({next:T=>{this.checkCourseCategoryUniqueness()}})}checkCourseCategoryUniqueness(){}ngOnInit(){}saveCourse(){if(this.courseForm.valid){this.apiCallActive=!0;let t={type:this.courseForm.value.type,name:this.courseForm.value.name.trim().toLowerCase(),description:this.courseForm.value.description,isPublished:this.courseForm.value.isPublished},i=u.d.createCourse,l=this.apiService.post(i,t);this.courseId&&(i+="/"+this.courseId,l=this.apiService.put(i,t)),l.subscribe({next:r=>{this.alertService.notify(r.message),this.matDialog.close(r)},error:r=>{this.errorHandlingService.handle(r)},complete:()=>{this.apiCallActive=!1}})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.so),e.Y36(_.WI),e.Y36(C.a),e.Y36(x.r),e.Y36(N.d),e.Y36(c.qu),e.Y36(v.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-course-form"]],decls:38,vars:21,consts:[["fxLayout","column",1,"container-div"],["fxLayoutAlign","end flex-end",1,"mat-accent-bg","m-0"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between flex-end",1,"mat-toolbar-header"],[1,"title","dialog-title"],["aria-label","Close dialog","mat-button","",1,"mat-icon-button","mat-button",3,"click"],[1,"mat-button-wrapper"],["role","img","aria-hidden","true",1,"mat-icon","material-icons"],[1,"mt-10"],["fxLayout","column",1,"content","p-20","mt-20"],["fx-layout","column",3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row"],["fxFlex","100"],["type","text","matInput","","formControlName","name","trim","","autocomplete","off","maxlength","50",3,"errorStateMatcher","readonly"],[4,"ngIf"],["align","end",4,"ngIf"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","rows","8","formControlName","description","trim","","autocomplete","off",3,"errorStateMatcher","readonly"],["formControlName","isPublished"],["class","mat-accent-bg m-0 mt-12","fxLayoutAlign","center",4,"ngIf"],["align","end"],[3,"value"],["fxLayoutAlign","center",1,"mat-accent-bg","m-0","mt-12"],["fxlayout","row","fxLayoutAlign","flex-end","fxFlex","100",1,"mat-toolbar-footer","action-buttons"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-raised-button","",1,"mr-20",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.matDialog.close()}),e.TgZ(6,"span",5)(7,"mat-icon",6),e._uU(8,"close"),e.qZA()()()()(),e._UZ(9,"mat-divider",7),e.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",10)(14,"mat-form-field",11)(15,"mat-label"),e._uU(16,"Course Name "),e.qZA(),e._UZ(17,"input",12),e.YNc(18,R,2,0,"mat-error",13),e.YNc(19,H,2,0,"mat-error",13),e.YNc(20,j,2,0,"mat-error",13),e.YNc(21,z,2,2,"mat-hint",14),e.qZA()(),e.TgZ(22,"div",10)(23,"mat-form-field")(24,"mat-label"),e._uU(25,"Type"),e.qZA(),e.TgZ(26,"mat-select",15),e.YNc(27,V,2,2,"mat-option",16),e.qZA()()(),e.TgZ(28,"div",10)(29,"mat-form-field",11)(30,"mat-label"),e._uU(31,"Course Description "),e.qZA(),e._UZ(32,"textarea",17),e.YNc(33,B,2,0,"mat-error",13),e.qZA()(),e.TgZ(34,"div",10)(35,"mat-checkbox",18),e._uU(36," Publish now "),e.qZA()()()()(),e.YNc(37,G,6,1,"mat-toolbar",19),e.qZA()),2&t&&(e.xp6(4),e.hij("",i.courseId?"Edit":"Create"," Course"),e.xp6(7),e.Q6J("formGroup",i.courseForm),e.xp6(1),e.ekj("form-div",!i.isViewOnly)("mt-30",i.isViewOnly),e.xp6(2),e.ekj("mb-10",i.courseForm.controls.name.touched&&i.courseForm.controls.name.hasError("required")),e.xp6(3),e.Q6J("errorStateMatcher",i.matcher)("readonly",i.isViewOnly),e.xp6(1),e.Q6J("ngIf",i.courseForm.controls.name.hasError("required")),e.xp6(1),e.Q6J("ngIf",!i.courseForm.controls.name.hasError("required")&&!i.courseForm.controls.name.hasError("pattern")&&i.courseForm.controls.name.hasError("not_unique")),e.xp6(1),e.Q6J("ngIf",!i.courseForm.controls.name.hasError("required")&&i.courseForm.controls.name.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",!i.isViewOnly),e.xp6(6),e.Q6J("ngForOf",i.types),e.xp6(2),e.ekj("mb-10",i.courseForm.controls.description.touched&&i.courseForm.controls.description.hasError("required")),e.xp6(3),e.Q6J("errorStateMatcher",i.matcher)("readonly",i.isViewOnly),e.xp6(1),e.Q6J("ngIf",i.courseForm.controls.description.hasError("required")),e.xp6(4),e.Q6J("ngIf",!i.isViewOnly))},dependencies:[d.sg,d.O5,g.TO,g.KE,g.bx,g.hX,w.Nt,b.lW,Z.d,k.Ye,A.Hw,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.sg,c.u,Y.oG,J.gD,D.ey]}),n})();var h=a(9299),M=a(3848);function K(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){const r=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.updateUrl(r))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();e.Q6J("active",i.currentUrl.indexOf(t.link)>-1),e.xp6(1),e.hij("",t.label," ")}}function W(n,o){1&n&&(e.TgZ(0,"p",11),e._uU(1," There is no course created yet!\n"),e.qZA())}function X(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1,"#"),e.qZA())}function ee(n,o){if(1&n&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&n){const t=o.index;e.xp6(1),e.hij(" ",t+1," ")}}function te(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1," Name "),e.qZA())}function ie(n,o){if(1&n&&(e.TgZ(0,"td",24),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t?null:t.name)," ")}}function ne(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1," Type "),e.qZA())}function oe(n,o){if(1&n&&(e.TgZ(0,"td",24),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.type)," ")}}function le(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1," Status "),e.qZA())}function re(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td",24)(1,"mat-checkbox",25),e.NdJ("click",function(l){const r=e.CHM(t),m=r.index,p=r.$implicit,f=e.oxw(2);return l.preventDefault(),e.KtG(f.manageCourseVisibility(m,p))}),e._uU(2," Published "),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(1),e.Q6J("checked",t.isPublished)}}function ae(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1," Actions "),e.qZA())}const se=function(n){return["/dashboard/course/details/",n]};function ce(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td",24)(1,"button",26),e.NdJ("click",function(){const r=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(m.openAddCourseForm(!1,r))}),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"button",27)(5,"mat-icon"),e._uU(6,"visibility"),e.qZA()(),e.TgZ(7,"button",28),e.NdJ("click",function(){const l=e.CHM(t),r=l.index,m=l.$implicit,p=e.oxw(2);return e.KtG(p.delete(r,m))}),e.TgZ(8,"mat-icon"),e._uU(9,"delete_outline"),e.qZA()()()}if(2&n){const t=o.$implicit;e.xp6(4),e.Q6J("routerLink",e.VKq(1,se,t._id))}}function de(n,o){1&n&&e._UZ(0,"tr",29)}function me(n,o){1&n&&e._UZ(0,"tr",30)}function ue(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"table",13),e.ynx(2,14),e.YNc(3,X,2,0,"th",15),e.YNc(4,ee,2,1,"td",16),e.BQk(),e.ynx(5,17),e.YNc(6,te,2,0,"th",15),e.YNc(7,ie,3,3,"td",16),e.BQk(),e.ynx(8,18),e.YNc(9,ne,2,0,"th",15),e.YNc(10,oe,3,3,"td",16),e.BQk(),e.ynx(11,19),e.YNc(12,le,2,0,"th",15),e.YNc(13,re,3,1,"td",16),e.BQk(),e.ynx(14,20),e.YNc(15,ae,2,0,"th",15),e.YNc(16,ce,10,3,"td",16),e.BQk(),e.YNc(17,de,1,0,"tr",21),e.YNc(18,me,1,0,"tr",22),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let E=(()=>{class n{constructor(t,i,l,r,m,p,f){this.apiService=t,this.dialog=i,this.errorHandlingService=l,this.alertService=r,this.activeRoute=m,this.router=p,this._location=f,this.apiCallActive=!0,this.currentUrl="",this.activeLinkIndex=-1,this.displayedColumns=["id","name","type","isPublished","action"],this.activeRoute.params.subscribe({next:({type:T})=>{this.currentUrl=this.router.url,this.getCourses(T)}}),this.navLinks=[{label:"Public",link:"/dashboard/course/list/public",index:0},{label:"Private",link:"/dashboard/course/list/private",index:1},{label:"Paid",link:"/dashboard/course/list/paid",index:2}]}updateUrl(t){this._location.go(t.link),this.currentUrl=t.link,this.getCourses(t.label.toLowerCase())}ngOnInit(){this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}delete(t,i){this.openConfirmDialog(t,i,{course:i,heading:"Delete course",type:"delete",message:"Are you sure you want to delete this course?"})}manageCourseVisibility(t,i){this.openConfirmDialog(t,i,{course:i,type:"visibility",heading:(i.isPublished?"Unpublish":"Publish")+" Course",message:"Are you sure you want to "+(i.isPublished?"un":"")+"publish this course?"})}openConfirmDialog(t,i,l={}){this.addCourseDialogRef=this.dialog.open(S.$,{minWidth:"320px",width:"585px",disableClose:!0,data:l}),this.addCourseDialogRef.afterClosed().subscribe({next:r=>{r&&("delete"==l.type?this.deleteCourse(t,i):this.manageCourse(t,i))}})}openAddCourseForm(t,i={}){this.addCourseDialogRef=this.dialog.open($,{minWidth:"320px",width:"585px",disableClose:!0,data:{isViewOnly:t,...i}}),this.addCourseDialogRef.afterClosed().subscribe({next:l=>{l&&this.router.navigate(["/dashboard/course/list/"+(l?.course?.type||"public")],{skipLocationChange:!0})}})}getCourses(t="public"){this.apiCallActive=!0,this.apiService.get(u.d.course+t).subscribe({next:i=>{this.apiCallActive=!1,this.dataSource=new s.by(i.courses||[])},error:i=>{this.apiCallActive=!1,this.errorHandlingService.handle(i)}})}manageCourse(t,i){this.apiService.put(u.d.manageCourseAccess+i._id,{isPublished:!i.isPublished}).subscribe({next:l=>{this.dataSource.data[t].isPublished=l.course.isPublished,this.alertService.notify(l.message)},error:l=>this.errorHandlingService.handle(l)})}deleteCourse(t,i){this.apiService.put(u.d.deleteCourse.replace(":id",i._id),{isDeleted:!0}).subscribe({next:l=>{this.dataSource.data.splice(t,1),this.dataSource=new s.by(this.dataSource.data||[]),this.alertService.notify(l.message)},error:l=>this.errorHandlingService.handle(l)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.a),e.Y36(_.uw),e.Y36(x.r),e.Y36(v.c),e.Y36(h.gz),e.Y36(h.F0),e.Y36(d.Ye))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-course-list"]],decls:12,vars:3,consts:[[1,"title-group"],[1,"title"],[1,"mat-h1"],[1,"title-buttons"],["mat-raised-button","","color","primary",3,"click"],["fxFlex","1 0"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],["class","container",4,"ngIf"],["mat-tab-link","",3,"active","click"],[1,"no-data"],[1,"container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","isPublished"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"checked","click"],["mat-icon-button","","color","primary","aria-label","view",3,"click"],["mat-icon-button","","color","primary","aria-label","view",3,"routerLink"],["mat-icon-button","","color","warn","aria-label","delete",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3," Course List "),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4),e.NdJ("click",function(){return i.openAddCourseForm(!1)}),e._uU(6," Add course "),e.qZA()()(),e._UZ(7,"mat-divider",5),e.TgZ(8,"nav",6),e.YNc(9,K,2,2,"a",7),e.qZA(),e.YNc(10,W,2,0,"p",8),e.YNc(11,ue,19,3,"div",9)),2&t&&(e.xp6(9),e.Q6J("ngForOf",i.navLinks),e.xp6(1),e.Q6J("ngIf",!i.apiCallActive&&(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)<=0),e.xp6(1),e.Q6J("ngIf",!i.apiCallActive&&(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)>0))},dependencies:[h.rH,d.sg,d.O5,b.lW,Z.d,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,A.Hw,Y.oG,M.BU,M.Nj,d.rS],styles:["table td:first-child,table th:first-child{width:50px;word-break:break-all}table td:last-child,table th:last-child{width:100px;align-content:flex-end}table td:last-child .mat-icon-button,table th:last-child .mat-icon-button{width:25px}\n"],encapsulation:2}),n})();var q=a(3546),F=a(1206),y=a(529),pe=a(4004),L=a(2340),ge=a(266);function _e(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function fe(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Slide name already exists. "),e.qZA())}function he(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Slide name can only be alpha-numeric. "),e.qZA())}function Ce(n,o){if(1&n&&(e.TgZ(0,"mat-hint",22),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("",t.nameMaxLength-t.slideForm.controls.name.value.length," ",t.nameMaxLength-t.slideForm.controls.name.value.length>1?"characters":"character"," left.")}}function xe(n,o){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t)," ")}}function ve(n,o){if(1&n&&(e.TgZ(0,"div",31),e._UZ(1,"i",32)(2,"div"),e.TgZ(3,"div",33),e._uU(4),e.qZA(),e.TgZ(5,"span",34),e._uU(6,"Select a file"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.AsE("Please select an ",t.selectedFileSettings.name,". Max size: ",t.selectedFileSettings.maxSize,"MB")}}function be(n,o){1&n&&(e.TgZ(0,"div",31)(1,"span",34),e._uU(2,"Select another"),e.qZA()())}function Ze(n,o){if(1&n&&(e.TgZ(0,"div",35)(1,"div",36),e._uU(2),e.qZA(),e._UZ(3,"progress",37),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("Uploading... ",t.uploadingProgress?t.uploadingProgress-1+"%":"0%",""),e.xp6(1),e.s9C("value",t.uploadingProgress)}}function ye(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function Te(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Choose a certain type of file. "),e.qZA())}function Se(n,o){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" File size should not be greater than ",t.selectedFileSettings.maxSize,"MB. ")}}function Ae(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ye,2,0,"mat-error",13),e.YNc(2,Te,2,0,"mat-error",13),e.YNc(3,Se,2,1,"mat-error",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].hasError("required")),e.xp6(1),e.Q6J("ngIf",!(null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].hasError("required"))&&(null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].hasError("file_type"))),e.xp6(1),e.Q6J("ngIf",!(null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].hasError("required"))&&!(null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].hasError("file_type"))&&(null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].hasError("file_size")))}}function Fe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"mat-label"),e._uU(2),e.ALo(3,"titlecase"),e.TgZ(4,"mat-icon",25),e._uU(5," info "),e.qZA()(),e.TgZ(6,"div",26)(7,"input",27),e.NdJ("change",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.uploadFiles(l))}),e.qZA(),e.TgZ(8,"label",28),e.YNc(9,ve,7,2,"div",29),e.YNc(10,be,3,0,"div",29),e.YNc(11,Ze,4,2,"div",30),e.qZA()(),e.YNc(12,Ae,4,3,"div",13),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,9,t.selectedFileSettings.name)," * "),e.xp6(2),e.hYB("matTooltip","Please select an ",t.selectedFileSettings.name,". Max size: ",t.selectedFileSettings.maxSize,"MB"),e.Q6J("matTooltipPosition","after"),e.xp6(3),e.s9C("accept",t.selectedFileSettings.mimeType),e.xp6(2),e.Q6J("ngIf",!(t.uploadingInProgess||t.attachment||null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].value)),e.xp6(1),e.Q6J("ngIf",!t.uploadingInProgess&&(t.attachment||(null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].value))),e.xp6(1),e.Q6J("ngIf",t.uploadingInProgess),e.xp6(1),e.Q6J("ngIf",!(t.attachment||null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].value))}}function we(n,o){if(1&n&&(e.TgZ(0,"video",38),e._uU(1," Sorry, your browser doesn't support embedded videos. "),e.qZA()),2&n){const t=e.oxw();e.s9C("src",t.slideForm.controls.file.value?t.environment.baseUrl+t.slideForm.controls.file.value:"",e.LSH)}}function Me(n,o){if(1&n&&(e.TgZ(0,"div",39)(1,"audio",40),e._UZ(2,"source",41),e._uU(3," Sorry, your browser does not support the audio element. "),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.s9C("src",t.slideForm.controls.file.value?t.environment.baseUrl+t.slideForm.controls.file.value:"",e.LSH)}}function qe(n,o){1&n&&(e.TgZ(0,"span",43),e._uU(1,"picture_as_pdf"),e.qZA())}function Ue(n,o){if(1&n&&(e.TgZ(0,"div",39)(1,"p"),e.YNc(2,qe,2,0,"span",42),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.attachment.originalName),e.xp6(1),e.hij(" ",t.attachment.originalName||"No file found","")}}function Oe(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function Ne(n,o){if(1&n&&(e.TgZ(0,"div",10)(1,"mat-form-field",44)(2,"mat-label"),e._uU(3,"Text "),e.qZA(),e._UZ(4,"textarea",45),e.YNc(5,Oe,2,0,"mat-error",13),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("errorStateMatcher",t.matcher)("rows",t.isViewOnly?15:10)("readonly",t.isViewOnly),e.xp6(1),e.Q6J("ngIf",t.slideForm.controls.text.hasError("required"))}}function ke(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-toolbar",46)(1,"div",47)(2,"button",48),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.saveSlide())}),e._uU(3,"Save"),e.qZA(),e.TgZ(4,"button",49),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.matDialog.close())}),e._uU(5,"Cancel"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.slideForm.invalid||t.apiCallActive)}}let De=(()=>{class n{constructor(t,i,l,r,m,p,f,T,P){this.matDialog=t,this.data=i,this.apiService=l,this.errorHandlingService=r,this.matcher=m,this.fb=p,this.http=f,this.alertService=T,this.activeRoute=P,this.environment=L.N,this.toggle=!1,this.apiCallActive=!1,this.nameMaxLength=50,this.slideList=[],this.color="#039ee3",this.isUnique=!0,this.fileObject={},this.uploadingInProgess=!1,this.attachment=null,this.types=["text","video","audio","pdf"],this.selectedType=1,this.selectedFileSettings={},this.fileSettings=[{name:"video",maxSize:200,mimeTypes:"video/mp4,video/webm,video/ogg",extensions:["mp4","ogg","webm"],fileType:"MP4, WebM or OGG",key:"file"},{name:"audio",maxSize:200,mimeTypes:"audio/mpeg,audio/ogg,audio/wav",extensions:["mp3","ogg","wav"],fileType:"MP3, OGG or WAV"},{name:"pdf",maxSize:100,mimeTypes:"application/pdf",extensions:["pdf"],fileType:"PDF"}],this.isViewOnly=i.isViewOnly,this.slideForm=this.fb.group({name:[i.name||"",[c.kI.required,c.kI.pattern("^[a-zA-Z0-9 s]*$")]],type:[i.type||"text",c.kI.required],text:[i.text],file:[i.file]}),this.selectedSlideDetails=i,this.courseId=i.courseId,this.selectedType=i.type||"text",i._id&&(this.slideId=i._id||null,this.attachment=i.file?{...i.file}:{}),this.slideForm.controls.name.valueChanges.pipe((0,O.b)(500)).subscribe({next:U=>{this.checkSlideUniqueness()}}),this.slideForm.controls.type.valueChanges.subscribe({next:U=>{this.typeUpdated(U)}})}checkSlideUniqueness(){}ngOnInit(){}saveSlide(){if(this.slideForm.valid){this.apiCallActive=!0;let t={type:this.slideForm.value.type,name:this.slideForm.value.name.trim().toLowerCase(),position:this.selectedSlideDetails.position||this.selectedSlideDetails.totalSlides+1};"text"==t.type?t.text=this.slideForm.value.text:t.file=this.attachment._id;let i=u.d.createSlide.replace(":id",this.courseId),l=this.apiService.post(i,t);this.slideId&&(i+="/"+this.slideId,l=this.apiService.put(i,t)),l.subscribe({next:r=>{this.alertService.notify(r.message),this.matDialog.close(r)},error:r=>{this.errorHandlingService.handle(r)},complete:()=>{this.apiCallActive=!1}})}}clearOthers(t){this.selectedSlideDetails[t]&&(this.slideForm.controls[t].setValue(this.selectedSlideDetails[t]),this.slideForm.controls[t].updateValueAndValidity()),"text"!=t?(this.fileObject={},this.uploadingInProgess=!1,this.uploadingProgress=0,this.attachment=null,this.slideForm.controls.file.setValue(""),this.slideForm.controls.file.setValidators([]),this.slideForm.controls.file.updateValueAndValidity()):(this.slideForm.controls.text.setValue(""),this.slideForm.controls.text.setValidators([]),this.slideForm.controls.text.updateValueAndValidity())}setValidators(t,i){this.slideForm.controls[t].setValidators(i),this.slideForm.controls[t].updateValueAndValidity(),this.clearOthers(t)}typeUpdated(t){"text"===(this.selectedType=t,t)?(this.selectedFileSettings={},this.setValidators(t,[c.kI.required])):(this.selectedFileSettings=this.fileSettings.filter(i=>i.name===t),this.selectedFileSettings=this.selectedFileSettings[0],this.setValidators("file",[c.kI.required]))}uploadFiles(t){if(t.target.value){const i=t.target.files[0];this.fileObject.fileName=i.name,this.fileObject.fileExtension=i.name.split(".")[i.name.split(".").length-1].toLowerCase(),this.fileObject.fileSize=i.size;const l=this.selectedFileSettings.extensions;if(l.find(r=>r===this.fileObject.fileExtension))if(this.fileObject.fileSize>1e6*this.selectedFileSettings.maxSize)this.alertService.notify(`Please make sure your file is less than ${this.selectedFileSettings.maxSize} MB in size.`);else{const r=new FormData;r.append("file",i),this.uploadFile(r)}else this.alertService.notify("Please make sure your file is in one of these formats: "+l)}}uploadFile(t){this.uploadingInProgess=!0,this.apiCallActive=!0,this.attachment=null,this.http.post(L.N.baseUrl+u.d.uploadFile+this.selectedFileSettings.name,t,{reportProgress:!0,observe:"events"}).pipe((0,pe.U)(i=>{switch(i.type){case y.dt.Sent:break;case y.dt.ResponseHeader:this.uploadingInProgess=!1,this.apiCallActive=!1;break;case y.dt.UploadProgress:this.uploadingProgress=Math.round(i.loaded/i.total*100);break;case y.dt.Response:this.apiCallActive=!1;const l=i.body.file;console.log(l),this.attachment={...l},this.slideForm.controls.file.setValue([this.attachment.destination,this.attachment.name].join("/")),setTimeout(()=>{this.uploadingProgress=0},500)}})).subscribe()}formatBytes(t,i=2){if(0===t)return"0 Bytes";const r=i<=0?0:i||2,p=Math.floor(Math.log(t)/Math.log(1024));return"("+parseFloat((t/Math.pow(1024,p)).toFixed(r))+" "+["Bytes","KB","MB"][p]+")"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.so),e.Y36(_.WI),e.Y36(C.a),e.Y36(x.r),e.Y36(N.d),e.Y36(c.qu),e.Y36(y.eN),e.Y36(v.c),e.Y36(h.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-slide-form"]],decls:34,vars:21,consts:[["fxLayout","column",1,"container-div"],["fxLayoutAlign","end flex-end",1,"mat-accent-bg","m-0"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between flex-end",1,"mat-toolbar-header"],[1,"title","dialog-title"],["aria-label","Close dialog","mat-button","",1,"mat-icon-button","mat-button",3,"click"],[1,"mat-button-wrapper"],["role","img","aria-hidden","true",1,"mat-icon","material-icons"],[1,"mt-10"],["fxLayout","column",1,"content","p-20","mt-20"],["fx-layout","column",3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row"],["fxFlex","100"],["type","text","matInput","","formControlName","name","trim","","autocomplete","off","maxlength","50",3,"errorStateMatcher","readonly"],[4,"ngIf"],["align","end",4,"ngIf"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","column","fxLayout.gt-xs","row","class","uploadImage",4,"ngIf"],["controls","","width","100%",3,"src",4,"ngIf"],["style","text-align: center;width: 100%;",4,"ngIf"],["fxLayout","column","fxLayout.gt-xs","row",4,"ngIf"],["class","mat-accent-bg m-0 mt-12","fxLayoutAlign","center",4,"ngIf"],["align","end"],[3,"value"],["fxLayout","column","fxLayout.gt-xs","row",1,"uploadImage"],["role","img","aria-hidden","true",1,"mat-icon","material-icons","info",3,"matTooltip","matTooltipPosition"],["id","file-upload-form",1,"uploader"],["id","file-upload","type","file","name","fileUpload",3,"accept","change"],["for","file-upload","id","file-drag"],["id","start",4,"ngIf"],["id","response",4,"ngIf"],["id","start"],["aria-hidden","true",1,"fa","fa-download"],["id","notimage"],["id","file-upload-btn",1,"btn","btn-primary"],["id","response"],["id","messages"],["max","100",1,"progress",3,"value"],["controls","","width","100%",3,"src"],[2,"text-align","center","width","100%"],["controls",""],[3,"src"],["class","material-icons",4,"ngIf"],[1,"material-icons"],["fxFlex","100",1,"mb-10"],["matInput","","formControlName","text","trim","","autocomplete","off",3,"errorStateMatcher","rows","readonly"],["fxLayoutAlign","center",1,"mat-accent-bg","m-0","mt-12"],["fxlayout","row","fxLayoutAlign","flex-end","fxFlex","100",1,"mat-toolbar-footer","action-buttons"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-raised-button","",1,"mr-20",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.matDialog.close()}),e.TgZ(6,"span",5)(7,"mat-icon",6),e._uU(8,"close"),e.qZA()()()()(),e._UZ(9,"mat-divider",7),e.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"div",10)(14,"mat-form-field",11)(15,"mat-label"),e._uU(16,"Slide Name "),e.qZA(),e._UZ(17,"input",12),e.YNc(18,_e,2,0,"mat-error",13),e.YNc(19,fe,2,0,"mat-error",13),e.YNc(20,he,2,0,"mat-error",13),e.YNc(21,Ce,2,2,"mat-hint",14),e.qZA()(),e.TgZ(22,"div",10)(23,"mat-form-field")(24,"mat-label"),e._uU(25,"Type"),e.qZA(),e.TgZ(26,"mat-select",15),e.YNc(27,xe,3,4,"mat-option",16),e.qZA()()(),e.YNc(28,Fe,13,11,"div",17),e.YNc(29,we,2,1,"video",18),e.YNc(30,Me,4,1,"div",19),e.YNc(31,Ue,4,2,"div",19),e.YNc(32,Ne,6,4,"div",20),e.qZA()()(),e.YNc(33,ke,6,1,"mat-toolbar",21),e.qZA()),2&t&&(e.xp6(4),e.hij("",i.slideId?"Edit":"Create"," Slide"),e.xp6(7),e.Q6J("formGroup",i.slideForm),e.xp6(1),e.ekj("form-div",!i.isViewOnly)("mt-30",i.isViewOnly),e.xp6(2),e.ekj("mb-10",i.slideForm.controls.name.touched&&i.slideForm.controls.name.hasError("required")),e.xp6(3),e.Q6J("errorStateMatcher",i.matcher)("readonly",i.isViewOnly),e.xp6(1),e.Q6J("ngIf",i.slideForm.controls.name.hasError("required")),e.xp6(1),e.Q6J("ngIf",!i.slideForm.controls.name.hasError("required")&&!i.slideForm.controls.name.hasError("pattern")&&i.slideForm.controls.name.hasError("not_unique")),e.xp6(1),e.Q6J("ngIf",!i.slideForm.controls.name.hasError("required")&&i.slideForm.controls.name.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",!i.isViewOnly),e.xp6(6),e.Q6J("ngForOf",i.types),e.xp6(1),e.Q6J("ngIf",("video"==i.selectedType||"audio"==i.selectedType||"pdf"==i.selectedType)&&!i.isViewOnly),e.xp6(1),e.Q6J("ngIf",!i.uploadingInProgess&&(i.attachment||(null==i.slideForm.controls[i.selectedFileSettings.key]?null:i.slideForm.controls[i.selectedFileSettings.key].value))&&"video"==i.selectedType||i.isViewOnly&&"video"==i.selectedSlideDetails.type),e.xp6(1),e.Q6J("ngIf",!i.uploadingInProgess&&(i.attachment||(null==i.slideForm.controls[i.selectedFileSettings.key]?null:i.slideForm.controls[i.selectedFileSettings.key].value))&&"audio"==i.selectedType||i.isViewOnly&&"audio"==i.selectedSlideDetails.type),e.xp6(1),e.Q6J("ngIf",!i.uploadingInProgess&&(i.attachment||(null==i.slideForm.controls[i.selectedFileSettings.key]?null:i.slideForm.controls[i.selectedFileSettings.key].value))&&"pdf"==i.selectedType||i.isViewOnly&&"pdf"==i.selectedSlideDetails.type),e.xp6(1),e.Q6J("ngIf","text"==i.selectedType||i.isViewOnly&&"text"==i.selectedSlideDetails.type),e.xp6(1),e.Q6J("ngIf",!i.isViewOnly))},dependencies:[d.sg,d.O5,g.TO,g.KE,g.bx,g.hX,w.Nt,b.lW,Z.d,k.Ye,A.Hw,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.sg,c.u,ge.gM,J.gD,D.ey,d.rS],styles:[".uploader[_ngcontent-%COMP%]{display:block;clear:both;margin:10px auto;width:100%;max-width:600px}.uploader[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer!important;display:block;height:100%;overflow:hidden;width:89%;padding:1rem 1.5rem;text-align:center;background:#fff;border-radius:7px;border:3px solid #eee;transition:all .2s ease;-webkit-user-select:none;user-select:none}.uploader[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{border-color:#454cad}.uploader[_ngcontent-%COMP%]   label.hover[_ngcontent-%COMP%]{border:3px solid #454cad;box-shadow:inset 0 0 0 6px #eee}.uploader[_ngcontent-%COMP%]   label.hover[_ngcontent-%COMP%]   #start[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{transform:scale(.8);opacity:.3}.uploader[_ngcontent-%COMP%]   .clear-float[_ngcontent-%COMP%]{clear:both}.uploader[_ngcontent-%COMP%]   #start[_ngcontent-%COMP%]{float:left;clear:both;width:100%}.uploader[_ngcontent-%COMP%]   #start.hidden[_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   #start[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%]{font-size:50px;margin-bottom:1rem;transition:all .2s ease-in-out}.uploader[_ngcontent-%COMP%]   #response[_ngcontent-%COMP%]{float:left;clear:both;width:100%}.uploader[_ngcontent-%COMP%]   #response.hidden[_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   #response[_ngcontent-%COMP%]   #messages[_ngcontent-%COMP%]{margin-bottom:.5rem}.uploader[_ngcontent-%COMP%]   #file-image[_ngcontent-%COMP%]{display:inline-block;margin:0;width:100%}.uploader[_ngcontent-%COMP%]   #file-image.hidden[_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   #notimage[_ngcontent-%COMP%]{display:block;float:left;clear:both;width:100%}.uploader[_ngcontent-%COMP%]   #notimage.hidden[_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%], .uploader[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{display:inline;clear:both;margin:0 auto;width:100%;max-width:180px;height:8px;border:0;border-radius:4px;background-color:#eee;overflow:hidden}.uploader[_ngcontent-%COMP%]   .progress[value][_ngcontent-%COMP%]::-webkit-progress-bar{border-radius:4px;background-color:#eee}.uploader[_ngcontent-%COMP%]   .progress[value][_ngcontent-%COMP%]::-webkit-progress-value{background:linear-gradient(to right,#393f90 0%,#454cad 50%);border-radius:4px}.uploader[_ngcontent-%COMP%]   .progress[value][_ngcontent-%COMP%]::-moz-progress-bar{background:linear-gradient(to right,#393f90 0%,#454cad 50%);border-radius:4px}.uploader[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#5f6982}.uploader[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-block;margin:.5rem .5rem 1rem;clear:both;font-family:inherit;font-weight:700;font-size:14px;text-decoration:none;text-transform:initial;border:none;border-radius:.2rem;outline:none;padding:0 1rem;height:36px;line-height:36px;color:#fff;transition:all .2s ease-in-out;box-sizing:border-box;background:#454cad;border-color:#454cad;cursor:pointer}"]}),n})();function Pe(n,o){1&n&&(e.TgZ(0,"div",5),e._uU(1,"No slides found"),e.qZA())}function Ie(n,o){1&n&&(e.TgZ(0,"div",16)(1,"i",17),e._uU(2,"drag_indicator"),e.qZA()())}function Ye(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",18)(1,"i",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index,r=e.oxw(2);return e.KtG(r.delete(l))}),e._uU(2,"delete_outline"),e.qZA()()}}function Je(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",18)(1,"i",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openAddSlideForm(!1,l))}),e._uU(2,"edit"),e.qZA()()}}function Ee(n,o){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,Ie,3,0,"div",11),e.TgZ(2,"div",12),e._uU(3),e.qZA(),e.TgZ(4,"div",13),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.TgZ(7,"div",14),e.YNc(8,Ye,3,0,"button",15),e.YNc(9,Je,3,0,"button",15),e.qZA()()),2&n){const t=o.$implicit,i=o.index,l=e.oxw(2);e.xp6(1),e.Q6J("ngIf",l.reorderMode),e.xp6(2),e.Oqu(i+1),e.xp6(2),e.hij(" ",e.lcZ(6,5,t.name)," "),e.xp6(3),e.Q6J("ngIf",!l.reorderMode),e.xp6(1),e.Q6J("ngIf",!l.reorderMode)}}function Le(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.reorderMode?l.saveOrder():l.reorderSlides())}),e._uU(1),e.TgZ(2,"i",4),e._uU(3),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.reorderMode?"Save":"Reorder"," "),e.xp6(2),e.Oqu(t.reorderMode?"add_circle_outline":"swap_vert")}}function Qe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.cancelReorder())}),e._uU(1," Cancel"),e.TgZ(2,"i",4),e._uU(3,"cancel"),e.qZA()()}}function Re(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e.NdJ("cdkDropListDropped",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.drop(l))}),e.YNc(2,Ee,10,7,"div",8),e.qZA(),e.TgZ(3,"div"),e.YNc(4,Le,4,2,"button",9),e.YNc(5,Qe,4,0,"button",9),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.slides),e.xp6(2),e.Q6J("ngIf",(null==t.slides?null:t.slides.length)>2),e.xp6(1),e.Q6J("ngIf",t.reorderMode)}}let He=(()=>{class n{constructor(t,i,l,r,m,p){this.apiService=t,this.dialog=i,this.errorHandlingService=l,this.alertService=r,this.activeRoute=m,this.router=p,this.apiCallActive=!1,this.rootComments=[],this.slides=[],this.orderedSlides=[],this.reorderMode=!1,this.activeRoute.params.subscribe({next:({id:f})=>{this.courseId=f,this.getSlides()}})}ngOnInit(){}getSlides(){let t=u.d.slide.replace(":id",this.courseId);this.apiCallActive=!0,this.apiService.get(t).subscribe({next:i=>{this.apiCallActive=!1,this.slides=i.slides||[],this.orderedSlides=[...this.slides]},error:i=>{this.apiCallActive=!1,this.errorHandlingService.handle(i)}})}openAddSlideForm(t,i={}){this.addSlideDialogRef=this.dialog.open(De,{minWidth:"320px",width:"585px",disableClose:!0,data:{isViewOnly:t,...i,totalSlides:this.slides.length,courseId:this.courseId}}),this.addSlideDialogRef.afterClosed().subscribe({next:l=>{l&&this.router.navigate(["/dashboard/course/details/"+this.courseId],{skipLocationChange:!0})}})}delete(t){this.confirmDialogRef=this.dialog.open(S.$,{minWidth:"320px",width:"585px",disableClose:!0,data:{slide:this.slides[t],heading:"Delete slide",message:"Are you sure you want to delete this slide?"}}),this.confirmDialogRef.afterClosed().subscribe({next:i=>{i&&this.deleteSlide(this.slides[t]._id)}})}deleteSlide(t){this.apiService.put(u.d.updateSlide.replace(":id",this.courseId).replace(":slideid",t),{isDeleted:!0}).subscribe({next:i=>{this.slides=this.slides.filter(l=>l._id!=t),this.alertService.notify("Slide deleted successfully")},error:i=>this.errorHandlingService.handle(i)})}reorderSlides(){this.reorderMode=!this.reorderMode}cancelReorder(){this.reorderMode=!1,this.slides=[...this.orderedSlides]}saveOrder(){let t=u.d.reorderSildes.replace(":id",this.courseId);this.apiCallActive=!0,this.apiService.put(t,{slides:this.slides.map(i=>i._id)}).subscribe({next:i=>{this.apiCallActive=!1,this.reorderMode=!1,this.orderedSlides=[...this.slides],this.alertService.notify(i.message)},error:i=>{this.apiCallActive=!1,this.errorHandlingService.handle(i)}})}drop(t){(0,F.bA)(this.slides,t.previousIndex,t.currentIndex)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.a),e.Y36(_.uw),e.Y36(x.r),e.Y36(v.c),e.Y36(h.gz),e.Y36(h.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["slide-list"]],decls:7,vars:2,consts:[[1,"slide-list-wrapper"],["class","no-data",4,"ngIf"],["class","reorder-wrapper",4,"ngIf"],["mat-raised-button","","color","primary",1,"m-4",3,"click"],[1,"material-icons"],[1,"no-data"],[1,"reorder-wrapper"],["cdkDropList","",1,"slide-list","mt-20",3,"cdkDropListDropped"],["class","slide-box","cdkDrag","",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","class","m-4",3,"click",4,"ngIf"],["cdkDrag","",1,"slide-box"],["class","w-10 drag-icon",4,"ngIf"],[1,"drag-index"],[1,"w-100","drag-content"],[1,"w-10","delete-icon"],["mat-icon-button","",4,"ngIf"],[1,"w-10","drag-icon"],["cdkDragHandle","",1,"material-icons"],["mat-icon-button",""],[1,"material-icons",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Pe,2,0,"div",1),e.YNc(2,Re,6,3,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.openAddSlideForm(!1)}),e._uU(4," Add New "),e.TgZ(5,"i",4),e._uU(6,"add_circle_outline"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngIf",!(null!=i.slides&&i.slides.length)),e.xp6(1),e.Q6J("ngIf",null==i.slides?null:i.slides.length))},dependencies:[d.sg,d.O5,b.lW,F.Wj,F.Zt,F.Bh,d.rS],styles:[".slide-list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}.reorder-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start}.slide-list[_ngcontent-%COMP%]{width:500px;max-width:100%;border:solid 1px #ccc;min-height:160px;display:block;justify-content:space-between;background:white;border-radius:4px;overflow:auto;max-height:calc(100vh - 400px);box-sizing:border-box}button[_ngcontent-%COMP%]{margin:20px 10px 0 0}.slide-box[_ngcontent-%COMP%]{padding:20px 10px;border:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;margin-bottom:10px;justify-content:space-between;box-sizing:border-box;background:white;font-size:14px}.slide-box[_ngcontent-%COMP%]   .drag-icon[_ngcontent-%COMP%]{cursor:move}.container[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.drag-icon[_ngcontent-%COMP%]{position:relative}.drag-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.slide-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .slide-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),n})(),je=(()=>{class n{transform(t){const i=t.split(" ");return`${i[0].charAt(0).toUpperCase()}${i[i.length-1].charAt(0).toUpperCase()}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"initials",type:n,pure:!0}),n})();function ze(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"initials"),e.qZA(),e.TgZ(5,"div",3)(6,"h5"),e._uU(7),e.ALo(8,"titlecase"),e.qZA(),e.TgZ(9,"span",4),e._uU(10),e.qZA(),e.TgZ(11,"div",7),e._uU(12),e.qZA()(),e.TgZ(13,"button",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.delete(r))}),e.TgZ(14,"i",6),e._uU(15,"delete_outline"),e.qZA()()()()}if(2&n){const t=o.$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,4,t.author.firstName+" "+t.author.lastName)," "),e.xp6(4),e.Oqu(e.lcZ(8,6,t.author.firstName)),e.xp6(3),e.hij("- ",t.createdAt,""),e.xp6(2),e.hij(" ",t.text," ")}}let Ve=(()=>{class n{constructor(t,i,l,r){this.apiService=t,this.dialog=i,this.errorHandlingService=l,this.alertService=r}ngOnInit(){console.log(this.comment)}delete(t){this.confirmDialogRef=this.dialog.open(S.$,{minWidth:"320px",width:"585px",disableClose:!0,data:{heading:"Delete slide",message:"Are you sure you want to delete this comment?"}}),this.confirmDialogRef.afterClosed().subscribe({next:i=>{i&&this.deleteComment(t._id)}})}deleteComment(t){this.apiService.put(u.d.deleteComment.replace(":id",this.courseId).replace(":commentId",t),{isDeleted:!0}).subscribe({next:i=>{this.alertService.notify(i.message)},error:i=>this.errorHandlingService.handle(i)})}addComment(t){this.apiService.post(u.d.addComment.replace(":id",this.courseId),{text:"",parent:""}).subscribe({next:i=>{this.alertService.notify(i.message)},error:i=>this.errorHandlingService.handle(i)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.a),e.Y36(_.uw),e.Y36(x.r),e.Y36(v.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["comment"]],inputs:{comment:"comment",courseId:"courseId"},decls:25,vars:10,consts:[[1,"comment"],[1,"user-banner"],[1,"avatar",2,"background-color","#fff5e9","border-color","#ffe0bd","color","#F98600"],[1,"user"],[1,"is-mute"],["mat-icon-button","",1,"ml-auto",3,"click"],[1,"material-icons"],[1,"content"],["class","reply-body comment",4,"ngFor","ngForOf"],[1,"footer","w-100"],["fxFlex","100",1,"w-100"],["matInput","","trim","",3,"rows"],["type","submit","mat-raised-button","","color","primary"],[1,"reply-body","comment"],["mat-icon-button","",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"initials"),e.qZA(),e.TgZ(5,"div",3)(6,"h5"),e._uU(7),e.ALo(8,"titlecase"),e.qZA(),e.TgZ(9,"span",4),e._uU(10),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return i.delete(i.comment)}),e.TgZ(12,"i",6),e._uU(13,"delete_outline"),e.qZA()(),e.TgZ(14,"div",7)(15,"div"),e._uU(16),e.qZA(),e.YNc(17,ze,16,8,"div",8),e.qZA(),e.TgZ(18,"div",9)(19,"mat-form-field",10)(20,"mat-label"),e._uU(21,"Reply "),e.qZA(),e._UZ(22,"textarea",11),e.qZA(),e.TgZ(23,"button",12),e._uU(24,"Reply"),e.qZA()()()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,6,i.comment.author.firstName+" "+i.comment.author.lastName)," "),e.xp6(4),e.hij("",e.lcZ(8,8,i.comment.author.firstName)," "),e.xp6(3),e.hij("- ",i.comment.createdAt,""),e.xp6(6),e.hij(" ",i.comment.text,""),e.xp6(1),e.Q6J("ngForOf",i.comment.children),e.xp6(5),e.Q6J("rows",3))},dependencies:[d.sg,g.KE,g.hX,w.Nt,b.lW,d.rS,je],styles:[".ml-auto[_ngcontent-%COMP%]{margin-left:auto}.w-100[_ngcontent-%COMP%]{width:100%}"]}),n})();var Q=a(3805);function Be(n,o){if(1&n&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.email),e.xp6(1),e.hij(" ",t.email+(t.firstName?"("+t.firstName+" "+t.lastName+")":"")," ")}}function Ge(n,o){if(1&n&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.enrollForm.controls.user.value?"No match found":"Type to search for users"," ")}}function $e(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}let Ke=(()=>{class n{constructor(t,i,l,r,m,p,f,T,P){this.matDialog=t,this.data=i,this.apiService=l,this.errorHandlingService=r,this.matcher=m,this.fb=p,this.http=f,this.alertService=T,this.activeRoute=P,this.apiCallActive=!1,this.filteredUsers=[],this.courseId=i.courseId,this.enrollForm=this.fb.group({user:["",c.kI.required]}),this.enrollForm.controls.user.valueChanges.pipe((0,O.b)(500)).subscribe({next:U=>{this.getUsersToEnroll(U)}})}displayFn(t){return t?t.email:""}getUsersToEnroll(t){let i=u.d.getUsersToEnroll.replace(":id",this.courseId);t?(i+="?search="+t.toLowerCase(),this.apiService.get(i).subscribe({next:l=>{this.filteredUsers=l.users},error:l=>{this.apiCallActive=!1,this.errorHandlingService.handle(l)}})):this.filteredUsers=[]}changed(t){console.log(t),this.selectedOption=t.value}ngOnInit(){}enrollUser(){this.enrollForm.valid&&this.selectedOption==this.enrollForm.value.user&&this.apiService.post(u.d.courseEnrollment.replace(":id",this.courseId),{user:this.enrollForm.value.user}).subscribe({next:t=>{this.alertService.notify(t.message),this.matDialog.close(t)},error:t=>this.errorHandlingService.handle(t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.so),e.Y36(_.WI),e.Y36(C.a),e.Y36(x.r),e.Y36(N.d),e.Y36(c.qu),e.Y36(y.eN),e.Y36(v.c),e.Y36(h.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-enrollment"]],decls:28,vars:6,consts:[["fxLayout","column",1,"container-div"],["fxLayoutAlign","end flex-end",1,"mat-accent-bg","m-0"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between flex-end",1,"mat-toolbar-header"],[1,"title","dialog-title"],["aria-label","Close dialog","mat-button","",1,"mat-icon-button","mat-button",3,"click"],[1,"mat-button-wrapper"],["role","img","aria-hidden","true",1,"mat-icon","material-icons"],[1,"mt-10"],["fxLayout","column",1,"content","p-20","mt-20"],["fx-layout","column",3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row"],["type","text","matInput","","formControlName","user",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["disabled","",4,"ngIf"],[4,"ngIf"],["fxLayoutAlign","center",1,"mat-accent-bg","m-0","mt-12"],["fxlayout","row","fxLayoutAlign","flex-end","fxFlex","100",1,"mat-toolbar-footer","action-buttons"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-raised-button","",1,"mr-20",3,"click"],[3,"value"],["disabled",""]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"span",3),e._uU(4,"Enroll User"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.matDialog.close()}),e.TgZ(6,"span",5)(7,"mat-icon",6),e._uU(8,"close"),e.qZA()()()()(),e._UZ(9,"mat-divider",7),e.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"mat-form-field")(14,"mat-label"),e._uU(15,"User "),e.qZA(),e._UZ(16,"input",11),e.TgZ(17,"mat-autocomplete",12,13),e.NdJ("optionSelected",function(r){return i.changed(r.option)}),e.YNc(19,Be,2,2,"mat-option",14),e.YNc(20,Ge,2,1,"mat-option",15),e.qZA(),e.YNc(21,$e,2,0,"mat-error",16),e.qZA()()()(),e.TgZ(22,"mat-toolbar",17)(23,"div",18)(24,"button",19),e.NdJ("click",function(){return i.enrollUser()}),e._uU(25,"Enroll"),e.qZA(),e.TgZ(26,"button",20),e.NdJ("click",function(){return i.matDialog.close()}),e._uU(27,"Cancel"),e.qZA()()()()),2&t){const l=e.MAs(18);e.xp6(11),e.Q6J("formGroup",i.enrollForm),e.xp6(5),e.Q6J("matAutocomplete",l),e.xp6(3),e.Q6J("ngForOf",i.filteredUsers),e.xp6(1),e.Q6J("ngIf",!i.filteredUsers.length),e.xp6(1),e.Q6J("ngIf",i.selectedOption!=i.enrollForm.controls.user.value||i.enrollForm.controls.user.hasError("required")),e.xp6(3),e.Q6J("disabled",i.enrollForm.invalid||i.selectedOption!=i.enrollForm.controls.user.value||i.apiCallActive)}},dependencies:[d.sg,d.O5,g.TO,g.KE,g.hX,w.Nt,b.lW,Z.d,k.Ye,A.Hw,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,D.ey,Q.XC,Q.ZL]}),n})();function We(n,o){1&n&&(e.TgZ(0,"div",6)(1,"h1",7),e._uU(2," Enrolled Users "),e.qZA()())}function Xe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"button",9),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.openEnrollUserForm())}),e._uU(2," Enroll new "),e.qZA()()}}function et(n,o){1&n&&e._UZ(0,"mat-divider",10)}function tt(n,o){if(1&n&&(e.TgZ(0,"p",11),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" There is no ","paid"==t.courseDetails.type?"enrollment requested":"user enrolled"," yet!\n")}}function it(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1,"#"),e.qZA())}function nt(n,o){if(1&n&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&n){const t=o.index;e.xp6(1),e.hij(" ",t+1," ")}}function ot(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1," User Name "),e.qZA())}function lt(n,o){if(1&n&&(e.TgZ(0,"td",24),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,(null==t||null==t.user?null:t.user.firstName)+" "+(null==t||null==t.user?null:t.user.lastName))," ")}}function rt(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1," Email "),e.qZA())}function at(n,o){if(1&n&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t||null==t.user?null:t.user.email," ")}}function st(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1," Enrolled On "),e.qZA())}function ct(n,o){if(1&n&&(e.TgZ(0,"td",24),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.enrolledOn,"dd/MM/yyyy")," ")}}function dt(n,o){1&n&&(e.TgZ(0,"th",23),e._uU(1," Actions "),e.qZA())}function mt(n,o){1&n&&e._UZ(0,"td",24)}function ut(n,o){1&n&&e._UZ(0,"tr",25)}function pt(n,o){1&n&&e._UZ(0,"tr",26)}function gt(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"table",13),e.ynx(2,14),e.YNc(3,it,2,0,"th",15),e.YNc(4,nt,2,1,"td",16),e.BQk(),e.ynx(5,17),e.YNc(6,ot,2,0,"th",15),e.YNc(7,lt,3,3,"td",16),e.BQk(),e.ynx(8,18),e.YNc(9,rt,2,0,"th",15),e.YNc(10,at,2,1,"td",16),e.BQk(),e.ynx(11,19),e.YNc(12,st,2,0,"th",15),e.YNc(13,ct,3,4,"td",16),e.BQk(),e.ynx(14,20),e.YNc(15,dt,2,0,"th",15),e.YNc(16,mt,1,0,"td",16),e.BQk(),e.YNc(17,ut,1,0,"tr",21),e.YNc(18,pt,1,0,"tr",22),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let _t=(()=>{class n{constructor(t,i,l,r){this.apiService=t,this.dialog=i,this.errorHandlingService=l,this.alertService=r,this.apiCallActive=!0}ngOnInit(){this.displayedColumns=["id","user","email","enrolledOn","action"],this.selectedCourseId=this.courseDetails._id,this.getEnrolledUsers()}getEnrolledUsers(){this.apiCallActive=!0,this.apiService.get(u.d.getEnrollments.replace(":id",this.selectedCourseId)).subscribe({next:t=>{this.apiCallActive=!1,this.dataSource=new s.by(t.enrollments||[])},error:t=>{this.apiCallActive=!1,this.errorHandlingService.handle(t)}})}manageCourseVisibility(t,i){this.openConfirmDialog(t,i,{course:i,type:"visibility",heading:(i.isPublished?"Unpublish":"Publish")+" Course",message:"Are you sure you want to "+(i.isPublished?"un":"")+"publish this course?"})}openConfirmDialog(t,i,l={}){this.addCourseDialogRef=this.dialog.open(S.$,{minWidth:"320px",width:"585px",disableClose:!0,data:l}),this.addCourseDialogRef.afterClosed().subscribe({next:r=>{r&&this.manageCourse(t,i)}})}manageCourse(t,i){this.apiService.put(u.d.manageCourseAccess+i._id,{isPublished:!i.isPublished}).subscribe({next:l=>{this.dataSource.data[t].isPublished=l.course.isPublished,this.alertService.notify(l.message)},error:l=>this.errorHandlingService.handle(l)})}openEnrollUserForm(){this.addCourseDialogRef=this.dialog.open(Ke,{minWidth:"320px",width:"585px",disableClose:!0,data:{courseId:this.selectedCourseId}}),this.addCourseDialogRef.afterClosed().subscribe({next:t=>{t&&this.getEnrolledUsers()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.a),e.Y36(_.uw),e.Y36(x.r),e.Y36(v.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["manage-enrollment"]],inputs:{courseDetails:"courseDetails"},decls:6,vars:5,consts:[[1,"flex-row"],["class","title",4,"ngIf"],["class","title-buttons ",4,"ngIf"],["fxFlex","1 0",4,"ngIf"],["class","no-data flex-start",4,"ngIf"],["class","container",4,"ngIf"],[1,"title"],[1,"mat-h1"],[1,"title-buttons"],["mat-raised-button","","color","primary",3,"click"],["fxFlex","1 0"],[1,"no-data","flex-start"],[1,"container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","email"],["matColumnDef","enrolledOn"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,We,3,0,"div",1),e.YNc(2,Xe,3,0,"div",2),e.qZA(),e.YNc(3,et,1,0,"mat-divider",3),e.YNc(4,tt,2,1,"p",4),e.YNc(5,gt,19,3,"div",5)),2&t&&(e.xp6(1),e.Q6J("ngIf",(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)>0),e.xp6(1),e.Q6J("ngIf","private"==i.courseDetails.type),e.xp6(1),e.Q6J("ngIf",(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)>0),e.xp6(1),e.Q6J("ngIf",!i.apiCallActive&&(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)<=0),e.xp6(1),e.Q6J("ngIf",!i.apiCallActive&&(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)>0))},dependencies:[d.O5,b.lW,Z.d,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,d.rS,d.uU],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;padding:8px}.flex-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:50%}.flex-row[_ngcontent-%COMP%]   .title-buttons[_ngcontent-%COMP%]{margin-left:auto}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px;word-break:break-all}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:100px;align-content:flex-end}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .mat-icon-button[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child   .mat-icon-button[_ngcontent-%COMP%]{width:25px}"]}),n})();function ft(n,o){1&n&&(e.TgZ(0,"div",5)(1,"h1",6),e._uU(2," Enrollment Requests "),e.qZA()())}function ht(n,o){1&n&&e._UZ(0,"mat-divider",7)}function Ct(n,o){1&n&&(e.TgZ(0,"p",8),e._uU(1," There is no enrollment requests yet!\n"),e.qZA())}function xt(n,o){1&n&&(e.TgZ(0,"th",21),e._uU(1,"#"),e.qZA())}function vt(n,o){if(1&n&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&n){const t=o.index;e.xp6(1),e.hij(" ",t+1," ")}}function bt(n,o){1&n&&(e.TgZ(0,"th",21),e._uU(1," User Name "),e.qZA())}function Zt(n,o){if(1&n&&(e.TgZ(0,"td",22),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,(null==t||null==t.enrollmentRequestedBy?null:t.enrollmentRequestedBy.firstName)+" "+(null==t||null==t.enrollmentRequestedBy?null:t.enrollmentRequestedBy.lastName))," ")}}function yt(n,o){1&n&&(e.TgZ(0,"th",21),e._uU(1," Email "),e.qZA())}function Tt(n,o){if(1&n&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",null==t||null==t.enrollmentRequestedBy?null:t.enrollmentRequestedBy.email," ")}}function St(n,o){1&n&&(e.TgZ(0,"th",21),e._uU(1," Enrolled On "),e.qZA())}function At(n,o){if(1&n&&(e.TgZ(0,"td",22),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.enrollmentRequestedOn,"dd/MM/yyyy")," ")}}function Ft(n,o){1&n&&(e.TgZ(0,"th",21),e._uU(1," Actions "),e.qZA())}function wt(n,o){1&n&&(e.TgZ(0,"td",23)(1,"button",24),e._uU(2," Accept "),e.TgZ(3,"mat-icon"),e._uU(4,"check circle"),e.qZA()(),e.TgZ(5,"button",25),e._uU(6," Decline "),e.TgZ(7,"mat-icon"),e._uU(8,"close circle"),e.qZA()()())}function Mt(n,o){1&n&&e._UZ(0,"tr",26)}function qt(n,o){1&n&&e._UZ(0,"tr",27)}function Ut(n,o){if(1&n&&(e.TgZ(0,"div",9)(1,"table",10),e.ynx(2,11),e.YNc(3,xt,2,0,"th",12),e.YNc(4,vt,2,1,"td",13),e.BQk(),e.ynx(5,14),e.YNc(6,bt,2,0,"th",12),e.YNc(7,Zt,3,3,"td",13),e.BQk(),e.ynx(8,15),e.YNc(9,yt,2,0,"th",12),e.YNc(10,Tt,2,1,"td",13),e.BQk(),e.ynx(11,16),e.YNc(12,St,2,0,"th",12),e.YNc(13,At,3,4,"td",13),e.BQk(),e.ynx(14,17),e.YNc(15,Ft,2,0,"th",12),e.YNc(16,wt,9,0,"td",18),e.BQk(),e.YNc(17,Mt,1,0,"tr",19),e.YNc(18,qt,1,0,"tr",20),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let Ot=(()=>{class n{constructor(t,i,l,r){this.apiService=t,this.dialog=i,this.errorHandlingService=l,this.alertService=r,this.apiCallActive=!0}ngOnInit(){this.displayedColumns=["id","user","email","enrollmentRequestedOn","action"],this.selectedCourseId=this.courseDetails._id,this.getEnrollmentRequests()}getEnrollmentRequests(){this.apiCallActive=!0,this.apiService.get(u.d.getEnrollmentRequests.replace(":id",this.selectedCourseId)).subscribe({next:t=>{this.apiCallActive=!1,this.dataSource=new s.by(t.enrollmentRequests||[])},error:t=>{this.apiCallActive=!1,this.errorHandlingService.handle(t)}})}manageRequest(t,i,l){this.openConfirmDialog(t,i,{request:i,heading:l+" Course",message:"Are you sure you want to "+(l.isPublished?"un":"")+"publish this course?"})}openConfirmDialog(t,i,l={}){this.addCourseDialogRef=this.dialog.open(S.$,{minWidth:"320px",width:"585px",disableClose:!0,data:l}),this.addCourseDialogRef.afterClosed().subscribe({next:r=>{r&&this.manageCourse(t,i)}})}manageCourse(t,i){this.apiService.put(u.d.manageCourseAccess+i._id,{isPublished:!i.isPublished}).subscribe({next:l=>{this.dataSource.data[t].isPublished=l.course.isPublished,this.alertService.notify(l.message)},error:l=>this.errorHandlingService.handle(l)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.a),e.Y36(_.uw),e.Y36(x.r),e.Y36(v.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["manage-enrollment-requests"]],inputs:{courseDetails:"courseDetails"},decls:5,vars:4,consts:[[1,"flex-row"],["class","title",4,"ngIf"],["fxFlex","1 0",4,"ngIf"],["class","no-data flex-start",4,"ngIf"],["class","container",4,"ngIf"],[1,"title"],[1,"mat-h1"],["fxFlex","1 0"],[1,"no-data","flex-start"],[1,"container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","email"],["matColumnDef","enrollmentRequestedOn"],["matColumnDef","action"],["mat-cell","","class","action-buttons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"action-buttons"],["mat-icon-button","","color","primary","aria-label","view"],["mat-icon-button","","color","warn","aria-label","delete"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ft,3,0,"div",1),e.qZA(),e.YNc(2,ht,1,0,"mat-divider",2),e.YNc(3,Ct,2,0,"p",3),e.YNc(4,Ut,19,3,"div",4)),2&t&&(e.xp6(1),e.Q6J("ngIf",(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)>0),e.xp6(1),e.Q6J("ngIf",(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)>0),e.xp6(1),e.Q6J("ngIf",!i.apiCallActive&&(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)<=0),e.xp6(1),e.Q6J("ngIf",!i.apiCallActive&&(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)>0))},dependencies:[d.O5,b.lW,Z.d,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,A.Hw,d.rS,d.uU],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;padding:8px}.flex-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:50%}.flex-row[_ngcontent-%COMP%]   .title-buttons[_ngcontent-%COMP%]{margin-left:auto}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80px;margin-right:20px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{align-content:flex-end}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px;word-break:break-all}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:220px!important}"]}),n})();function Nt(n,o){if(1&n&&(e.TgZ(0,"h1",7)(1,"a",8),e._uU(2,"Course List"),e.qZA(),e._uU(3," > "),e.TgZ(4,"i"),e._uU(5),e.ALo(6,"titlecase"),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.MGl("routerLink","/dashboard/course/list/",null==t.courseDetails?null:t.courseDetails.type,""),e.xp6(4),e.Oqu(e.lcZ(6,2,null==t.courseDetails?null:t.courseDetails.name))}}function kt(n,o){1&n&&(e.TgZ(0,"p",9),e._uU(1," Course details not found!\n"),e.qZA())}function Dt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",13),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.activeSlide=4)}),e._uU(1," Enrollment Requests "),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("active",4==t.activeSlide)}}function Pt(n,o){1&n&&(e.TgZ(0,"div",20),e._uU(1,"No comments found"),e.qZA())}function It(n,o){if(1&n&&(e.TgZ(0,"mat-card"),e._UZ(1,"comment",21),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("comment",t)}}function Yt(n,o){if(1&n&&(e.TgZ(0,"div",15),e._UZ(1,"manage-enrollment-requests",18),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("hidden",4!=t.activeSlide),e.xp6(1),e.Q6J("courseDetails",t.courseDetails)}}function Jt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e._uU(4),e.ALo(5,"titlecase"),e.qZA()(),e.TgZ(6,"mat-card-content")(7,"div",11)(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA()(),e.TgZ(12,"nav",12)(13,"a",13),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.activeSlide=1)}),e._uU(14," Slides "),e.qZA(),e.TgZ(15,"a",13),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.activeSlide=2)}),e._uU(16," Comments "),e.qZA(),e.TgZ(17,"a",13),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.activeSlide=3)}),e._uU(18," Enrollments "),e.qZA(),e.YNc(19,Dt,2,1,"a",14),e.qZA(),e.TgZ(20,"div",15),e._UZ(21,"slide-list"),e.qZA(),e.TgZ(22,"div",15),e.YNc(23,Pt,2,0,"div",16),e.YNc(24,It,2,1,"mat-card",17),e.qZA(),e.TgZ(25,"div",15),e._UZ(26,"manage-enrollment",18),e.qZA(),e.YNc(27,Yt,2,2,"div",19),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,14,t.courseDetails.name)),e.xp6(5),e.Oqu(t.courseDetails.description),e.xp6(2),e.hij("Published: ",t.courseDetails.isPublished?"Yes":"No",""),e.xp6(2),e.Q6J("active",1==t.activeSlide),e.xp6(2),e.Q6J("active",2==t.activeSlide),e.xp6(2),e.Q6J("active",3==t.activeSlide),e.xp6(2),e.Q6J("ngIf","paid"==(null==t.courseDetails?null:t.courseDetails.type)),e.xp6(1),e.Q6J("hidden",1!=t.activeSlide),e.xp6(2),e.Q6J("hidden",2!=t.activeSlide),e.xp6(1),e.Q6J("ngIf",!(null!=t.rootComments&&t.rootComments.length)),e.xp6(1),e.Q6J("ngForOf",t.rootComments),e.xp6(1),e.Q6J("hidden",3!=t.activeSlide),e.xp6(1),e.Q6J("courseDetails",t.courseDetails),e.xp6(1),e.Q6J("ngIf","paid"==(null==t.courseDetails?null:t.courseDetails.type))}}let Et=(()=>{class n{constructor(t,i,l,r,m){this.apiService=t,this.dialog=i,this.errorHandlingService=l,this.alertService=r,this.activeRoute=m,this.activeSlide=1,this.apiCallActive=!0,this.rootComments=[],this.activeRoute.params.subscribe({next:p=>{this.selectedCourseId=p.id,this.getCourseDetails()}})}ngOnInit(){}getCourseDetails(){this.apiCallActive=!0,this.apiService.get(u.d.getCourseDetails+this.selectedCourseId).subscribe({next:t=>{this.apiCallActive=!1,this.courseDetails=t.course,this.rootComments=this.courseDetails.rootComments},error:t=>{this.apiCallActive=!1,this.errorHandlingService.handle(t)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.a),e.Y36(_.uw),e.Y36(x.r),e.Y36(v.c),e.Y36(h.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-course-details"]],decls:7,vars:3,consts:[[1,"title-group"],[1,"title"],["class","mat-h1",4,"ngIf"],[1,"title-buttons"],["fxFlex","1 0"],["class","no-data",4,"ngIf"],["class","container",4,"ngIf"],[1,"mat-h1"],[1,"link",3,"routerLink"],[1,"no-data"],[1,"container"],[1,"details-container"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","click"],["mat-tab-link","",3,"active","click",4,"ngIf"],[3,"hidden"],["class","no-data flex-start",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"courseDetails"],[3,"hidden",4,"ngIf"],[1,"no-data","flex-start"],[3,"comment"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Nt,7,4,"h1",2),e.qZA(),e._UZ(3,"div",3),e.qZA(),e._UZ(4,"mat-divider",4),e.YNc(5,kt,2,0,"p",5),e.YNc(6,Jt,28,16,"div",6)),2&t&&(e.xp6(2),e.Q6J("ngIf",null==i.courseDetails?null:i.courseDetails.name),e.xp6(3),e.Q6J("ngIf",!(i.apiCallActive||null!=i.courseDetails&&i.courseDetails._id)),e.xp6(1),e.Q6J("ngIf",!i.apiCallActive&&(null==i.courseDetails?null:i.courseDetails._id)))},dependencies:[h.yS,d.sg,d.O5,q.a8,q.dk,q.dn,q.n5,Z.d,M.BU,M.Nj,He,Ve,_t,Ot,d.rS],styles:[".comment{display:grid;gap:14px;margin-top:15px}.comment .user-banner{display:flex;justify-content:space-between}.comment .user-banner .avatar{height:55px;width:55px;border-radius:50%;vertical-align:middle;display:flex;align-items:center;justify-content:center;margin-right:12px;line-height:20px}.comment .user-banner .avatar img{max-width:100%;border-radius:50%}.comment .user-banner .user{align-items:center;display:flex;width:100%;margin-bottom:8px;flex-wrap:wrap}.comment .user-banner .user h5{font-size:16px;color:#000;font-weight:500;line-height:17px;margin-bottom:0}.comment .user-banner .user span{font-size:14px;font-weight:400;overflow-wrap:break-word}.comment .user-banner .user .reply{margin-left:auto;color:#007bff;text-decoration:none}.comment .user-banner .user .stat{display:flex;position:absolute;right:-2px;bottom:-2px;display:block;width:12px;height:12px;z-index:9;border:2px solid #ffffff;border-radius:100px}.comment .user-banner .user .stat.green{background:#00ba34}.comment .user-banner .user .stat.grey{background:#969696}.comment .user-banner .content{font-size:14px;font-weight:400;overflow-wrap:break-word;flex-basis:100%}.comment .footer{gap:12px;display:flex;align-items:center}.comment .footer .reactions{display:flex;align-items:center;gap:8px}.comment .footer .divider{height:12px;width:1px;background:#e8e8e8}.comment:not(.comment:first-child){padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid #e8e8e8}.mat-card-header-text{margin:0!important}\n"],encapsulation:2}),n})();var Lt=a(8427),Qt=a(4111);const Rt=[{path:"list/:type",component:E},{path:"list/:type/slide/list",component:E},{path:"details/:id",component:Et},{path:"**",redirectTo:"list"}];let Ht=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(Rt),d.ez,Lt.q,Qt.q,F._t]}),n})()}}]);