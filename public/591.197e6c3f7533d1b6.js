"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[591],{591:(en,Y,c)=>{c.r(Y),c.d(Y,{CourseModule:()=>Xt});var d=c(6895),p=c(9938),w=c(9302),F=c(2340),s=c(4006),g=c(5412),U=c(8372),J=c(4004),E=c(7071),h=c(529),e=c(4650),v=c(8606),C=c(3263),I=c(2510),b=c(6964),f=c(9549),S=c(4144),Z=c(4859),O=c(3683),N=c(455);function H(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function j(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Course name already exists. "),e.qZA())}function z(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Course name can only be alpha-numeric. "),e.qZA())}function B(i,l){if(1&i&&(e.TgZ(0,"mat-hint",28),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE("",t.nameMaxLength-t.courseForm.controls.name.value.length," ",t.nameMaxLength-t.courseForm.controls.name.value.length>1?"characters":"character"," left.")}}function V(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"a",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.courseForm.controls.type.setValue(r.value))}),e._uU(1),e.qZA()}if(2&i){const t=l.$implicit,n=e.oxw();e.ekj("active",n.courseForm.controls.type.value==t.value),e.xp6(1),e.Oqu(t.name)}}function $(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function G(i,l){1&i&&(e.TgZ(0,"div")(1,"span",30),e._uU(2,"Select a file"),e.qZA(),e.TgZ(3,"div"),e._uU(4,"Please select an image. Max size: 4MB"),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Recommended aspect ratio is 2:1"),e.qZA()())}function K(i,l){if(1&i&&(e.TgZ(0,"div",31)(1,"div",32),e._uU(2),e.qZA(),e._UZ(3,"progress",33),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij("Uploading... ",t.uploadingProgress?t.uploadingProgress-1+"%":"0%",""),e.xp6(1),e.s9C("value",t.uploadingProgress)}}function W(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"img",34),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.uploadFiles(o))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("src",t.courseForm.controls.cover.value?t.baseUrl+t.courseForm.controls.cover.value:"",e.LSH)}}function X(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function ee(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Choose a certain type of file. "),e.qZA())}function te(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," File size should not be greater than 4MB. "),e.qZA())}function ne(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-toolbar",35)(1,"div",36)(2,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveCourse())}),e._uU(3,"Save"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.courseForm.invalid||t.apiCallActive)}}let ie=(()=>{class i{constructor(t,n,o,r,a,m,x,y){this.matDialog=t,this.data=n,this.apiService=o,this.errorHandlingService=r,this.matcher=a,this.fb=m,this.alertService=x,this.http=y,this.baseUrl=F.N.baseUrl,this.toggle=!1,this.apiCallActive=!1,this.nameMaxLength=50,this.courseList=[],this.color="#039ee3",this.isUnique=!0,this.fileObject={},this.uploadingInProgess=!1,this.attachment=null,this.types=[{value:"public",name:"Public"},{value:"private",name:"Private"},{value:"paid",name:"Paid"}],this.isViewOnly=n.isViewOnly,this.courseForm=this.fb.group({name:[n.name||"",[s.kI.required,s.kI.pattern("^[a-zA-Z0-9 s]*$")]],type:[n.type||"public",s.kI.required],description:[n.description||"",s.kI.required],isPublished:[n.isPublished],cover:["",s.kI.required]}),n._id&&(this.courseId=n._id||null,this.attachment=n.cover?{...n.cover}:{},this.courseForm.controls.cover.setValue([this.attachment.destination,this.attachment.name].join("/")),console.log(this.courseForm.controls.cover.value)),this.courseForm.controls.name.valueChanges.pipe((0,U.b)(500)).subscribe({next:M=>{this.checkCourseCategoryUniqueness()}})}checkCourseCategoryUniqueness(){}ngOnInit(){}saveCourse(){if(this.courseForm.valid){this.apiCallActive=!0;let t={type:this.courseForm.value.type,name:this.courseForm.value.name.trim().toLowerCase(),description:this.courseForm.value.description,isPublished:this.courseForm.value.isPublished,cover:this.attachment._id},n=p.d.createCourse,o=this.apiService.post(n,t);this.courseId&&(n+="/"+this.courseId,o=this.apiService.put(n,t)),o.subscribe({next:r=>{this.alertService.notify(r.message),this.matDialog.close(r)},error:r=>{this.errorHandlingService.handle(r)},complete:()=>{this.apiCallActive=!1}})}}uploadFiles(t){if(t.target.value){const n=t.target.files[0];this.fileObject.fileName=n.name,this.fileObject.fileExtension=n.name.split(".")[n.name.split(".").length-1].toLowerCase(),this.fileObject.fileSize=n.size;const o=E.g.allowedImageFileExtentions;if(o.find(r=>r===this.fileObject.fileExtension))if(this.fileObject.fileSize>E.g.maximumFileSize)this.alertService.notify(`Please make sure your file is less than ${E.g.maximumFileSize/1e6} MB in size.`);else{const r=new FormData;r.append("file",n),this.uploadFile(r)}else this.alertService.notify("Please make sure your file is in one of these formats: "+o)}}uploadFile(t){this.uploadingInProgess=!0,this.apiCallActive=!0,this.attachment=null,this.http.post(F.N.baseUrl+p.d.uploadFile+"cover",t,{reportProgress:!0,observe:"events"}).pipe((0,J.U)(n=>{switch(n.type){case h.dt.Sent:break;case h.dt.ResponseHeader:this.uploadingInProgess=!1,this.apiCallActive=!1;break;case h.dt.UploadProgress:this.uploadingProgress=Math.round(n.loaded/n.total*100);break;case h.dt.Response:this.apiCallActive=!1,201===n.status||201===n.status?(this.attachment={...n.body.file},this.courseForm.controls.cover.setValue([this.attachment.destination,this.attachment.name].join("/"))):this.errorHandlingService.handle(n.body),setTimeout(()=>{this.uploadingProgress=0},500)}})).subscribe()}formatBytes(t,n=2){if(0===t)return"0 Bytes";const r=n<=0?0:n||2,m=Math.floor(Math.log(t)/Math.log(1024));return"("+parseFloat((t/Math.pow(1024,m)).toFixed(r))+" "+["Bytes","KB","MB"][m]+")"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.so),e.Y36(g.WI),e.Y36(v.a),e.Y36(C.r),e.Y36(I.d),e.Y36(s.qu),e.Y36(b.c),e.Y36(h.eN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-form"]],decls:48,vars:27,consts:[["fxLayout","column",1,"container-div"],["fxLayoutAlign","end flex-end",1,"mat-accent-bg","m-0"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between flex-end",1,"mat-toolbar-header"],[1,"title","dialog-title"],[1,"mat-button-wrapper","cursor-pointer",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","12","r","10","stroke","#8F8F8F","stroke-width","1.5"],["d","M14.5 9.49999L9.5 14.5M9.49998 9.49997L14.5 14.4999","stroke","#8F8F8F","stroke-width","1.5","stroke-linecap","round"],["fxLayout","column",1,"content","p-20","mt-20"],["fx-layout","column",3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row"],["fxFlex","100"],["type","text","matInput","","formControlName","name","trim","","autocomplete","off","maxlength","50",3,"errorStateMatcher","readonly"],[4,"ngIf"],["align","end",4,"ngIf"],[1,"nav","nav-pills","nav-fill"],["class","nav-link ",3,"active","click",4,"ngFor","ngForOf"],["fxLayout","column","fxLayout.gt-xs","row",1,"h-150"],["matInput","","rows","3","formControlName","description","trim","","autocomplete","off",3,"errorStateMatcher","readonly"],["fxLayout","column","fxLayout.gt-xs","row",1,"uploadImage","mt-20"],["id","file-upload-form",1,"uploader"],["id","file-upload","type","file","name","fileUpload","accept","image/png,image/jpeg,image/jpg",3,"change"],["for","file-upload","id","file-drag",1,"c-label"],["id","response",4,"ngIf"],["id","file-image","alt","Preview",3,"src","change",4,"ngIf"],["fxLayout","column","fxLayout.gt-xs","row",1,"flex-center","mt-20"],["formControlName","isPublished","name","enablepublished"],["class","mat-accent-bg m-0 mt-12","fxLayoutAlign","center",4,"ngIf"],["align","end"],[1,"nav-link",3,"click"],[1,"c-btn"],["id","response"],["id","messages"],["max","100",1,"progress",3,"value"],["id","file-image","alt","Preview",3,"src","change"],["fxLayoutAlign","center",1,"mat-accent-bg","m-0","mt-12"],["fxlayout","row","fxLayoutAlign","flex-end","fxFlex","100",1,"mat-toolbar-footer","action-buttons"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"span",4),e.NdJ("click",function(){return n.matDialog.close()}),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"circle",6)(8,"path",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"div",10)(12,"div",10)(13,"mat-label"),e._uU(14,"Course Name "),e.qZA(),e.TgZ(15,"mat-form-field",11),e._UZ(16,"input",12),e.YNc(17,H,2,0,"mat-error",13),e.YNc(18,j,2,0,"mat-error",13),e.YNc(19,z,2,0,"mat-error",13),e.YNc(20,B,2,2,"mat-hint",14),e.qZA()(),e.TgZ(21,"div",10)(22,"mat-label"),e._uU(23,"Type"),e.qZA(),e.TgZ(24,"nav",15),e.YNc(25,V,2,3,"a",16),e.qZA()(),e.TgZ(26,"div",17)(27,"mat-label"),e._uU(28,"Course Description "),e.qZA(),e.TgZ(29,"mat-form-field",11),e._UZ(30,"textarea",18),e.YNc(31,$,2,0,"mat-error",13),e.qZA()(),e.TgZ(32,"div",19)(33,"mat-label"),e._uU(34,"Cover Image * "),e.qZA(),e.TgZ(35,"div",20)(36,"input",21),e.NdJ("change",function(r){return n.uploadFiles(r)}),e.qZA(),e.TgZ(37,"label",22),e.YNc(38,G,7,0,"div",13),e.YNc(39,K,4,2,"div",23),e.YNc(40,W,1,1,"img",24),e.qZA()(),e.YNc(41,X,2,0,"mat-error",13),e.YNc(42,ee,2,0,"mat-error",13),e.YNc(43,te,2,0,"mat-error",13),e.qZA(),e.TgZ(44,"div",25),e._uU(45," Published "),e._UZ(46,"mat-slide-toggle",26),e.qZA()()()(),e.YNc(47,ne,4,1,"mat-toolbar",27),e.qZA()),2&t&&(e.xp6(4),e.hij("",n.courseId?"Edit":"Create"," Course"),e.xp6(6),e.Q6J("formGroup",n.courseForm),e.xp6(1),e.ekj("form-div",!n.isViewOnly)("mt-30",n.isViewOnly),e.xp6(4),e.ekj("mb-10",n.courseForm.controls.name.touched&&n.courseForm.controls.name.hasError("required")),e.xp6(1),e.Q6J("errorStateMatcher",n.matcher)("readonly",n.isViewOnly),e.xp6(1),e.Q6J("ngIf",n.courseForm.controls.name.hasError("required")),e.xp6(1),e.Q6J("ngIf",!n.courseForm.controls.name.hasError("required")&&!n.courseForm.controls.name.hasError("pattern")&&n.courseForm.controls.name.hasError("not_unique")),e.xp6(1),e.Q6J("ngIf",!n.courseForm.controls.name.hasError("required")&&n.courseForm.controls.name.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",!n.isViewOnly),e.xp6(5),e.Q6J("ngForOf",n.types),e.xp6(4),e.ekj("mb-10",n.courseForm.controls.description.touched&&n.courseForm.controls.description.hasError("required")),e.xp6(1),e.Q6J("errorStateMatcher",n.matcher)("readonly",n.isViewOnly),e.xp6(1),e.Q6J("ngIf",n.courseForm.controls.description.hasError("required")),e.xp6(7),e.Q6J("ngIf",!n.uploadingInProgess&&!n.attachment),e.xp6(1),e.Q6J("ngIf",n.uploadingInProgess),e.xp6(1),e.Q6J("ngIf",!n.uploadingInProgess&&n.attachment),e.xp6(1),e.Q6J("ngIf",null==n.courseForm.controls.cover?null:n.courseForm.controls.cover.hasError("required")),e.xp6(1),e.Q6J("ngIf",!(null!=n.courseForm.controls.cover&&n.courseForm.controls.cover.hasError("required"))&&n.courseForm.controls.cover.hasError("file_type")),e.xp6(1),e.Q6J("ngIf",!n.courseForm.controls.cover.hasError("required")&&!n.courseForm.controls.cover.hasError("file_type")&&n.courseForm.controls.cover.hasError("file_size")),e.xp6(4),e.Q6J("ngIf",!n.isViewOnly))},dependencies:[d.sg,d.O5,f.TO,f.KE,f.bx,f.hX,S.Nt,Z.lW,O.Ye,s._Y,s.Fj,s.JJ,s.JL,s.nD,s.sg,s.u,N.Rr],styles:[".mat-dialog-container{width:100%;padding:24px 32px}.nav{margin:16px 0}.nav .nav-link{background:#fff;border:1px solid #8F8F8F;border-radius:68px;color:#8f8f8f;font-size:12px;font-weight:700;line-height:16px;margin-right:8px;padding:8px 16px;width:-moz-fit-content;width:fit-content;flex:none;cursor:pointer}.nav .nav-link.active{background:#F5F8FF;color:#007aff;border-color:#007aff}.h-150{max-height:180px}.h-150 .mat-form-field-flex{height:150px}.c-btn{font-style:normal;font-weight:700;font-size:12px;line-height:24px;text-decoration-line:underline;color:#007aff}.info{font-family:Inter;font-style:normal;font-weight:500;font-size:12px;line-height:16px;color:#a0a5b0!important}.uploader label{width:100%;height:150px;border:1px solid #8F8F8F;display:flex;align-items:center;justify-content:center}.h-50{height:50px!important}progress::-webkit-progress-value{background:#007AFF}progress{color:#007aff}progress::-moz-progress-bar{background:#007AFF}\n"],encapsulation:2}),i})();var _=c(8996),D=c(4850),P=c(7392),L=c(8255),k=c(3848);function oe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"a",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.updateUrl(r))}),e._uU(1),e.qZA()}if(2&i){const t=l.$implicit,n=e.oxw();e.Q6J("active",n.currentUrl.indexOf(t.link)>-1),e.xp6(1),e.hij("",t.label," ")}}function le(i,l){1&i&&(e.TgZ(0,"p",13),e._uU(1," There is no course created yet!\n"),e.qZA())}function re(i,l){1&i&&(e.TgZ(0,"span",36),e._uU(1,"Free"),e.qZA())}function se(i,l){1&i&&(e.TgZ(0,"span",37),e._uU(1,"Paid"),e.qZA())}function ae(i,l){1&i&&(e.TgZ(0,"span",38),e._uU(1,"Private"),e.qZA())}const Q=function(i){return["/dashboard/course/details/",i]};function ce(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e._UZ(1,"img",18),e.TgZ(2,"div",19)(3,"div",14)(4,"div",20)(5,"h2",21),e._uU(6),e.ALo(7,"titlecase"),e.qZA(),e.TgZ(8,"p",22),e._uU(9),e.qZA(),e.TgZ(10,"div",23),e.YNc(11,re,2,0,"span",24),e.YNc(12,se,2,0,"span",25),e.YNc(13,ae,2,0,"span",26),e.TgZ(14,"a",27),e._uU(15,"View Course"),e.qZA()()(),e.TgZ(16,"div",28),e._uU(17," Published "),e.TgZ(18,"mat-slide-toggle",29),e.NdJ("ngModelChange",function(o){const a=e.CHM(t).$implicit;return e.KtG(a.isPublished=o)})("click",function(o){const r=e.CHM(t),a=r.index,m=r.$implicit,x=e.oxw(2);return o.preventDefault(),e.KtG(x.manageCourseVisibility(a,m))}),e.qZA(),e.TgZ(19,"a",30),e.O4$(),e.TgZ(20,"svg",31),e._UZ(21,"rect",32)(22,"path",33),e.qZA()(),e.kcU(),e.TgZ(23,"mat-menu",null,34)(25,"button",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.openAddCourseForm(!1,r))}),e._uU(26,"Edit"),e.qZA(),e.TgZ(27,"button",35),e.NdJ("click",function(){const o=e.CHM(t),r=o.index,a=o.$implicit,m=e.oxw(2);return e.KtG(m.delete(r,a))}),e._uU(28,"Delete"),e.qZA()()()()()()}if(2&i){const t=l.$implicit,n=e.MAs(24),o=e.oxw(2);e.xp6(1),e.Q6J("src",null!=t&&null!=t.cover&&t.cover.path?o.baseUrl+(null==t||null==t.cover?null:t.cover.path):"../assets/jillyAcadey.png",e.LSH),e.xp6(4),e.Q6J("routerLink",e.VKq(12,Q,t._id)),e.xp6(1),e.hij(" ",e.lcZ(7,10,t.name),""),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Q6J("ngIf","public"==t.type),e.xp6(1),e.Q6J("ngIf","paid"==t.type),e.xp6(1),e.Q6J("ngIf","private"==t.type),e.xp6(1),e.Q6J("routerLink",e.VKq(14,Q,t._id)),e.xp6(4),e.Q6J("ngModel",t.isPublished),e.xp6(1),e.Q6J("matMenuTriggerFor",n)}}function de(i,l){if(1&i&&(e.TgZ(0,"div")(1,"div",14)(2,"div",15),e.YNc(3,ce,29,16,"div",16),e.qZA()()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.courses)}}let me=(()=>{class i{constructor(t,n,o,r,a,m,x){this.apiService=t,this.dialog=n,this.errorHandlingService=o,this.alertService=r,this.activeRoute=a,this.router=m,this._location=x,this.baseUrl=F.N.baseUrl,this.courses=[],this.apiCallActive=!0,this.currentUrl="",this.activeLinkIndex=-1,this.displayedColumns=["id","name","type","isPublished","action"],this.activeRoute.params.subscribe({next:({type:y})=>{this.currentUrl=this.router.url,this.getCourses(y)}}),this.navLinks=[{label:"Public",link:"/dashboard/course/list/public",index:0},{label:"Private",link:"/dashboard/course/list/private",index:1},{label:"Paid",link:"/dashboard/course/list/paid",index:2}]}updateUrl(t){this._location.go(t.link),this.currentUrl=t.link,this.getCourses(t.label.toLowerCase())}ngOnInit(){this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}delete(t,n){this.openConfirmDialog(t,n,{course:n,heading:"Delete course",type:"delete",message:"Are you sure you want to delete this course?"})}manageCourseVisibility(t,n){this.openConfirmDialog(t,n,{course:n,type:"visibility",heading:(n.isPublished?"Unpublish":"Publish")+" Course",message:"Are you sure you want to "+(n.isPublished?"un":"")+"publish this course?"})}openConfirmDialog(t,n,o={}){this.addCourseDialogRef=this.dialog.open(w.$,{minWidth:"320px",width:"585px",disableClose:!0,data:o}),this.addCourseDialogRef.afterClosed().subscribe({next:r=>{r&&("delete"==o.type?this.deleteCourse(t,n):this.manageCourse(t,n))}})}openAddCourseForm(t,n={}){this.addCourseDialogRef=this.dialog.open(ie,{minWidth:"520px",width:"585px",disableClose:!0,data:{isViewOnly:t,...n}}),this.addCourseDialogRef.afterClosed().subscribe({next:o=>{o&&this.router.navigate(["/dashboard/course/list/"+(o?.course?.type||"public")],{skipLocationChange:!0})}})}getCourses(t="public"){this.apiCallActive=!0,this.apiService.get(p.d.course+t).subscribe({next:n=>{this.apiCallActive=!1,this.courses=n.courses||[]},error:n=>{this.apiCallActive=!1,this.errorHandlingService.handle(n)}})}manageCourse(t,n){this.apiService.put(p.d.manageCourseAccess+n._id,{isPublished:!n.isPublished}).subscribe({next:o=>{this.courses[t].isPublished=o.course.isPublished,this.alertService.notify(o.message)},error:o=>this.errorHandlingService.handle(o)})}deleteCourse(t,n){this.apiService.put(p.d.deleteCourse.replace(":id",n._id),{isDeleted:!0}).subscribe({next:o=>{this.courses.splice(t,1),this.alertService.notify(o.message)},error:o=>this.errorHandlingService.handle(o)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.a),e.Y36(g.uw),e.Y36(C.r),e.Y36(b.c),e.Y36(_.gz),e.Y36(_.F0),e.Y36(d.Ye))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-list"]],decls:17,vars:4,consts:[[1,"title-group"],[1,"title"],[1,"h1"],[1,"line","italic"],[1,"flex","space-between","mb-15"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],[1,"title-buttons"],["mat-raised-button","","color","primary",3,"click"],["fxFlex","1 0"],["class","no-data",4,"ngIf"],[4,"ngIf"],["mat-tab-link","",3,"active","click"],[1,"no-data"],[1,"row"],[1,"col-12","mt-10"],["class","card mt-10 p-3 flex flex-row",4,"ngFor","ngForOf"],[1,"card","mt-10","p-3","flex","flex-row"],["alt","...",1,"col-sm-4","col-lg-3",3,"src"],[1,"card-body","col-lg-9","col-sm-8","flex","flex-row"],[1,"col-lg-8","col-md-6"],[1,"card-title","h2","cursor-pointer",3,"routerLink"],[1,"card-text"],[1,"d-flex"],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-danger",4,"ngIf"],["class","badge badge-pill badge-light",4,"ngIf"],[1,"view-course",3,"routerLink"],[1,"col-lg-4","col-md-6","published"],["name","enablepublished",3,"ngModel","ngModelChange","click"],[1,"cursor-pointer",3,"matMenuTriggerFor"],["width","40","height","40","viewBox","0 0 40 40","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","39.5","y","0.5","width","39","height","39","rx","19.5","transform","rotate(90 39.5 0.5)","fill","white","stroke","#F3F3F3"],["fill-rule","evenodd","clip-rule","evenodd","d","M20 10C21.1046 10 22 10.8954 22 12C22 13.1046 21.1046 14 20 14C18.8954 14 18 13.1046 18 12C18 10.8954 18.8954 10 20 10ZM20 18C21.1046 18 22 18.8954 22 20C22 21.1046 21.1046 22 20 22C18.8954 22 18 21.1046 18 20C18 18.8954 18.8954 18 20 18ZM22 28C22 26.8954 21.1046 26 20 26C18.8954 26 18 26.8954 18 28C18 29.1046 18.8954 30 20 30C21.1046 30 22 29.1046 22 28Z","fill","#BFBFBF"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-danger"],[1,"badge","badge-pill","badge-light"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3," Course List "),e.TgZ(4,"p",3),e._uU(5),e.qZA()()()(),e.TgZ(6,"div",4)(7,"nav",5),e.YNc(8,oe,2,2,"a",6),e.qZA(),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return n.openAddCourseForm(!1)}),e.TgZ(11,"mat-icon"),e._uU(12,"add"),e.qZA(),e._uU(13," Add New "),e.qZA()()(),e._UZ(14,"mat-divider",9),e.YNc(15,le,2,0,"p",10),e.YNc(16,de,4,1,"div",11)),2&t&&(e.xp6(5),e.hij("",n.courses.length," courses"),e.xp6(3),e.Q6J("ngForOf",n.navLinks),e.xp6(7),e.Q6J("ngIf",!n.apiCallActive&&(null==n.courses?null:n.courses.length)<=0),e.xp6(1),e.Q6J("ngIf",!n.apiCallActive&&(null==n.courses?null:n.courses.length)>0))},dependencies:[_.rH,_.yS,d.sg,d.O5,Z.lW,D.d,P.Hw,s.JJ,s.On,L.VK,L.OP,L.p6,k.BU,k.Nj,N.Rr,d.rS],styles:["table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px;word-break:break-all}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:100px;align-content:flex-end}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .mat-icon-button[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child   .mat-icon-button[_ngcontent-%COMP%]{width:25px}.lesson[_ngcontent-%COMP%]{font-family:Plus Jakarta Sans;font-size:12px;font-weight:600;font-style:normal;line-height:15px;letter-spacing:0em;text-align:left;color:#8f8f8f}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:.375rem;object-fit:cover;height:175px!important}.card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{width:100%}"]}),i})();var A=c(3546),T=c(1206);function ue(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function pe(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Slide name already exists. "),e.qZA())}function ge(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Slide name can only be alpha-numeric. "),e.qZA())}function fe(i,l){if(1&i&&(e.TgZ(0,"mat-hint",22),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE("",t.nameMaxLength-t.slideForm.controls.name.value.length," ",t.nameMaxLength-t.slideForm.controls.name.value.length>1?"characters":"character"," left.")}}function he(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"a",23),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return a.slideForm.controls.type.setValue(r),e.KtG(a.selectedType=r)}),e._uU(1),e.ALo(2,"titlecase"),e.qZA()}if(2&i){const t=l.$implicit,n=e.oxw();e.ekj("active",n.selectedType==t),e.xp6(1),e.hij(" ",e.lcZ(2,3,t),"")}}function _e(i,l){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" The allowed extensions are ",t.selectedFileSettings.extensions,".")}}function xe(i,l){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"i",29),e.TgZ(2,"span",30),e._uU(3),e.qZA(),e.TgZ(4,"div",31),e.YNc(5,_e,3,1,"span",13),e._uU(6),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(3),e.hij("Select ",t.selectedFileSettings.name," file"),e.xp6(2),e.Q6J("ngIf","pdf"!=t.selectedType),e.xp6(1),e.hij(" Max size: ",t.selectedFileSettings.maxSize,"MB ")}}function ve(i,l){1&i&&(e.TgZ(0,"div")(1,"span",30),e._uU(2,"Select another"),e.qZA()())}function Ce(i,l){if(1&i&&(e.TgZ(0,"div",32)(1,"div",33),e._uU(2),e.qZA(),e._UZ(3,"progress",34),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("Uploading... ",t.uploadingProgress?t.uploadingProgress-1+"%":"0%",""),e.xp6(1),e.Q6J("value",t.uploadingProgress)}}function be(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function Ze(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Choose a certain type of file. "),e.qZA())}function ye(i,l){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" File size should not be greater than ",t.selectedFileSettings.maxSize,"MB. ")}}function we(i,l){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,be,2,0,"mat-error",13),e.YNc(2,Ze,2,0,"mat-error",13),e.YNc(3,ye,2,1,"mat-error",13),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].hasError("required")),e.xp6(1),e.Q6J("ngIf",!(null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].hasError("required"))&&(null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].hasError("file_type"))),e.xp6(1),e.Q6J("ngIf",!(null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].hasError("required"))&&!(null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].hasError("file_type"))&&(null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].hasError("file_size")))}}function Fe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"input",26),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.uploadFiles(o))}),e.qZA(),e.TgZ(3,"label",27),e.YNc(4,xe,7,3,"div",13),e.YNc(5,ve,3,0,"div",13),e.YNc(6,Ce,4,2,"div",28),e.qZA()(),e.YNc(7,we,4,3,"div",13),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("accept",t.selectedFileSettings.mimeTypes),e.xp6(1),e.ekj("h-50",!t.uploadingInProgess&&(t.attachment||(null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].value))),e.xp6(1),e.Q6J("ngIf",!(t.uploadingInProgess||t.attachment||null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].value)),e.xp6(1),e.Q6J("ngIf",!t.uploadingInProgess&&(t.attachment||(null==t.slideForm.controls[t.selectedFileSettings.key]?null:t.slideForm.controls[t.selectedFileSettings.key].value))),e.xp6(1),e.Q6J("ngIf",t.uploadingInProgess),e.xp6(1),e.Q6J("ngIf",!(t.attachment||null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].value))}}function Te(i,l){if(1&i&&(e.TgZ(0,"video",35),e._uU(1," Sorry, your browser doesn't support embedded videos. "),e.qZA()),2&i){const t=e.oxw();e.s9C("src",t.slideForm.controls.file.value?t.environment.baseUrl+t.slideForm.controls.file.value:"",e.LSH)}}function Se(i,l){if(1&i&&(e.TgZ(0,"div",36)(1,"audio",37),e._UZ(2,"source",38),e._uU(3," Sorry, your browser does not support the audio element. "),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.s9C("src",t.slideForm.controls.file.value?t.environment.baseUrl+t.slideForm.controls.file.value:"",e.LSH)}}function ke(i,l){1&i&&(e.TgZ(0,"span",40),e._uU(1,"picture_as_pdf"),e.qZA())}function Ae(i,l){if(1&i&&(e.TgZ(0,"div",36)(1,"p"),e.YNc(2,ke,2,0,"span",39),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.attachment.originalName),e.xp6(1),e.hij(" ",t.attachment.originalName||"No file found","")}}function Me(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}function qe(i,l){if(1&i&&(e.TgZ(0,"div",41)(1,"mat-form-field",42),e._UZ(2,"textarea",43),e.YNc(3,Me,2,0,"mat-error",13),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("errorStateMatcher",t.matcher)("rows",t.isViewOnly?8:5)("readonly",t.isViewOnly),e.xp6(1),e.Q6J("ngIf",t.slideForm.controls.text.hasError("required"))}}function Ue(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-toolbar",44)(1,"div",45)(2,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveSlide())}),e._uU(3,"Save"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.slideForm.invalid||!(null!=t.slideForm.controls.text&&t.slideForm.controls.text.value)&&"text"==t.slideForm.controls.type.value||!t.attachment&&!(null!=t.slideForm.controls[t.selectedFileSettings.key]&&t.slideForm.controls[t.selectedFileSettings.key].value)&&"text"!=t.slideForm.controls.type.value||t.apiCallActive)}}let Ee=(()=>{class i{constructor(t,n,o,r,a,m,x,y,M){this.matDialog=t,this.data=n,this.apiService=o,this.errorHandlingService=r,this.matcher=a,this.fb=m,this.http=x,this.alertService=y,this.activeRoute=M,this.environment=F.N,this.toggle=!1,this.apiCallActive=!1,this.nameMaxLength=50,this.slideList=[],this.color="#039ee3",this.isUnique=!0,this.fileObject={},this.uploadingInProgess=!1,this.attachment=null,this.types=["text","video","audio","pdf"],this.selectedType=1,this.selectedFileSettings={},this.fileSettings=[{name:"video",maxSize:200,mimeTypes:"video/mp4,video/webm,video/ogg",extensions:["mp4","ogg","webm"],fileType:"MP4, WebM or OGG",key:"file"},{name:"audio",maxSize:200,mimeTypes:"audio/mpeg,audio/ogg,audio/wav",extensions:["mp3","ogg","wav"],fileType:"MP3, OGG or WAV"},{name:"pdf",maxSize:100,mimeTypes:"application/pdf",extensions:["pdf"],fileType:"PDF"}],this.isViewOnly=n.isViewOnly,this.slideForm=this.fb.group({name:[n.name||"",[s.kI.required,s.kI.pattern("^[a-zA-Z0-9 s]*$")]],type:[n.type||"text",s.kI.required],text:[n.text||""],file:[""]}),this.selectedSlideDetails=n,this.courseId=n.courseId,this.selectedType=n.type||"text",n._id&&(this.slideId=n._id||null,this.typeUpdated(n.type),n.file&&(this.attachment=n.file?{...n.file}:{},this.slideForm.controls.file.setValue([this.attachment.destination,this.attachment.name].join("/")))),this.slideForm.controls.name.valueChanges.pipe((0,U.b)(500)).subscribe({next:q=>{this.checkSlideUniqueness()}}),this.slideForm.controls.type.valueChanges.subscribe({next:q=>{this.typeUpdated(q)}})}checkSlideUniqueness(){}ngOnInit(){}saveSlide(){if(this.slideForm.valid){this.apiCallActive=!0;let t={type:this.slideForm.value.type,name:this.slideForm.value.name.trim().toLowerCase(),position:this.selectedSlideDetails.position||this.selectedSlideDetails.totalSlides+1};"text"==t.type?t.text=this.slideForm.value.text:t.file=this.attachment._id;let n=p.d.createSlide.replace(":id",this.courseId),o=this.apiService.post(n,t);this.slideId&&(n+="/"+this.slideId,o=this.apiService.put(n,t)),o.subscribe({next:r=>{this.alertService.notify(r.message),this.matDialog.close(r)},error:r=>{this.errorHandlingService.handle(r)},complete:()=>{this.apiCallActive=!1}})}}clearOthers(t){this.selectedSlideDetails[t]&&(this.slideForm.controls[t].setValue(this.selectedSlideDetails[t]),this.slideForm.controls[t].updateValueAndValidity()),"text"!=t?(this.fileObject={},this.uploadingInProgess=!1,this.uploadingProgress=0,this.attachment=null,this.slideForm.controls.file.setValue(""),this.slideForm.controls.file.setValidators([]),this.slideForm.controls.file.updateValueAndValidity()):(this.slideForm.controls.text.setValue(""),this.slideForm.controls.text.setValidators([]),this.slideForm.controls.text.updateValueAndValidity())}setValidators(t,n){this.slideForm.controls[t].setValidators(n),this.slideForm.controls[t].updateValueAndValidity(),this.clearOthers(t)}typeUpdated(t){"text"===(this.selectedType=t,t)?(this.selectedFileSettings={},this.setValidators(t,[s.kI.required])):(this.selectedFileSettings=this.fileSettings.filter(n=>n.name===t),this.selectedFileSettings=this.selectedFileSettings[0],this.setValidators("file",[s.kI.required]))}uploadFiles(t){if(t.target.value){const n=t.target.files[0];this.fileObject.fileName=n.name,this.fileObject.fileExtension=n.name.split(".")[n.name.split(".").length-1].toLowerCase(),this.fileObject.fileSize=n.size;const o=this.selectedFileSettings.extensions;if(o.find(r=>r===this.fileObject.fileExtension))if(this.fileObject.fileSize>1e6*this.selectedFileSettings.maxSize)this.alertService.notify(`Please make sure your file is less than ${this.selectedFileSettings.maxSize} MB in size.`);else{const r=new FormData;r.append("file",n),this.uploadFile(r)}else this.alertService.notify("Please make sure your file is in one of these formats: "+o)}}uploadFile(t){this.uploadingInProgess=!0,this.apiCallActive=!0,this.attachment=null,this.http.post(F.N.baseUrl+p.d.uploadFile+this.selectedFileSettings.name,t,{reportProgress:!0,observe:"events"}).pipe((0,J.U)(n=>{switch(n.type){case h.dt.Sent:break;case h.dt.ResponseHeader:this.uploadingInProgess=!1,this.apiCallActive=!1;break;case h.dt.UploadProgress:this.uploadingProgress=Math.round(n.loaded/n.total*100);break;case h.dt.Response:this.apiCallActive=!1;const o=n.body.file;console.log(o),this.attachment={...o},this.slideForm.controls.file.setValue([this.attachment.destination,this.attachment.name].join("/")),setTimeout(()=>{this.uploadingProgress=0},500)}})).subscribe()}formatBytes(t,n=2){if(0===t)return"0 Bytes";const r=n<=0?0:n||2,m=Math.floor(Math.log(t)/Math.log(1024));return"("+parseFloat((t/Math.pow(1024,m)).toFixed(r))+" "+["Bytes","KB","MB"][m]+")"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.so),e.Y36(g.WI),e.Y36(v.a),e.Y36(C.r),e.Y36(I.d),e.Y36(s.qu),e.Y36(h.eN),e.Y36(b.c),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-slide-form"]],decls:32,vars:21,consts:[["fxLayout","column",1,"container-div","create-slide-dialog"],["fxLayoutAlign","end flex-end",1,"mat-accent-bg","m-0"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between flex-end",1,"mat-toolbar-header"],[1,"title","dialog-title"],[1,"mat-button-wrapper","cursor-pointer",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","12","r","10","stroke","#8F8F8F","stroke-width","1.5"],["d","M14.5 9.49999L9.5 14.5M9.49998 9.49997L14.5 14.4999","stroke","#8F8F8F","stroke-width","1.5","stroke-linecap","round"],["fxLayout","column",1,"content","p-20","mt-20"],["fx-layout","column",3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row"],["fxFlex","100"],["type","text","matInput","","formControlName","name","trim","","autocomplete","off","maxlength","50",3,"errorStateMatcher","readonly"],[4,"ngIf"],["align","end",4,"ngIf"],[1,"nav","nav-pills","nav-fill"],["class","nav-link ",3,"active","click",4,"ngFor","ngForOf"],["fxLayout","column","fxLayout.gt-xs","row","class","uploadImage",4,"ngIf"],["controls","","width","100%",3,"src",4,"ngIf"],["style","text-align: center;width: 100%;",4,"ngIf"],["fxLayout","column","fxLayout.gt-xs","row","class"," h-150",4,"ngIf"],["class","mat-accent-bg m-0 mt-12","fxLayoutAlign","center",4,"ngIf"],["align","end"],[1,"nav-link",3,"click"],["fxLayout","column","fxLayout.gt-xs","row",1,"uploadImage"],["id","file-upload-form",1,"uploader"],["id","file-upload","type","file","name","fileUpload",3,"accept","change"],["for","file-upload","id","file-drag",1,"c-label"],["id","response",4,"ngIf"],["aria-hidden","true",1,"fa","fa-download"],[1,"c-btn"],[1,"info"],["id","response"],["id","messages"],["max","100",1,"progress",3,"value"],["controls","","width","100%",3,"src"],[2,"text-align","center","width","100%"],["controls",""],[3,"src"],["class","material-icons",4,"ngIf"],[1,"material-icons"],["fxLayout","column","fxLayout.gt-xs","row",1,"h-150"],["fxFlex","100",1,"mb-10"],["matInput","","formControlName","text","trim","","autocomplete","off",3,"errorStateMatcher","rows","readonly"],["fxLayoutAlign","center",1,"mat-accent-bg","m-0","mt-12"],["fxlayout","row","fxLayoutAlign","flex-end","fxFlex","100",1,"mat-toolbar-footer","action-buttons"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"span",4),e.NdJ("click",function(){return n.matDialog.close()}),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"circle",6)(8,"path",7),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",8)(10,"form",9)(11,"div",10)(12,"div",10)(13,"mat-label"),e._uU(14,"Slide Name "),e.qZA(),e.TgZ(15,"mat-form-field",11),e._UZ(16,"input",12),e.YNc(17,ue,2,0,"mat-error",13),e.YNc(18,pe,2,0,"mat-error",13),e.YNc(19,ge,2,0,"mat-error",13),e.YNc(20,fe,2,2,"mat-hint",14),e.qZA()(),e.TgZ(21,"div",10)(22,"mat-label"),e._uU(23,"Type"),e.qZA(),e.TgZ(24,"nav",15),e.YNc(25,he,3,5,"a",16),e.qZA()(),e.YNc(26,Fe,8,7,"div",17),e.YNc(27,Te,2,1,"video",18),e.YNc(28,Se,4,1,"div",19),e.YNc(29,Ae,4,2,"div",19),e.YNc(30,qe,4,4,"div",20),e.qZA()()(),e.YNc(31,Ue,4,1,"mat-toolbar",21),e.qZA()),2&t&&(e.xp6(4),e.hij("",n.slideId?"Edit":"Create"," Slide"),e.xp6(6),e.Q6J("formGroup",n.slideForm),e.xp6(1),e.ekj("form-div",!n.isViewOnly)("mt-30",n.isViewOnly),e.xp6(4),e.ekj("mb-10",n.slideForm.controls.name.touched&&n.slideForm.controls.name.hasError("required")),e.xp6(1),e.Q6J("errorStateMatcher",n.matcher)("readonly",n.isViewOnly),e.xp6(1),e.Q6J("ngIf",n.slideForm.controls.name.hasError("required")),e.xp6(1),e.Q6J("ngIf",!n.slideForm.controls.name.hasError("required")&&!n.slideForm.controls.name.hasError("pattern")&&n.slideForm.controls.name.hasError("not_unique")),e.xp6(1),e.Q6J("ngIf",!n.slideForm.controls.name.hasError("required")&&n.slideForm.controls.name.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",!n.isViewOnly),e.xp6(5),e.Q6J("ngForOf",n.types),e.xp6(1),e.Q6J("ngIf",("video"==n.selectedType||"audio"==n.selectedType||"pdf"==n.selectedType)&&!n.isViewOnly),e.xp6(1),e.Q6J("ngIf",!n.uploadingInProgess&&(n.attachment||(null==n.slideForm.controls[n.selectedFileSettings.key]?null:n.slideForm.controls[n.selectedFileSettings.key].value))&&"video"==n.selectedType||n.isViewOnly&&"video"==n.selectedSlideDetails.type),e.xp6(1),e.Q6J("ngIf",!n.uploadingInProgess&&(n.attachment||(null==n.slideForm.controls[n.selectedFileSettings.key]?null:n.slideForm.controls[n.selectedFileSettings.key].value))&&"audio"==n.selectedType||n.isViewOnly&&"audio"==n.selectedSlideDetails.type),e.xp6(1),e.Q6J("ngIf",!n.uploadingInProgess&&(n.attachment||(null==n.slideForm.controls[n.selectedFileSettings.key]?null:n.slideForm.controls[n.selectedFileSettings.key].value))&&"pdf"==n.selectedType||n.isViewOnly&&"pdf"==n.selectedSlideDetails.type),e.xp6(1),e.Q6J("ngIf","text"==n.selectedType||n.isViewOnly&&"text"==n.selectedSlideDetails.type),e.xp6(1),e.Q6J("ngIf",!n.isViewOnly))},dependencies:[d.sg,d.O5,f.TO,f.KE,f.bx,f.hX,S.Nt,Z.lW,O.Ye,s._Y,s.Fj,s.JJ,s.JL,s.nD,s.sg,s.u,d.rS],styles:[".mat-dialog-container{max-width:437px;width:100%;padding:24px 32px}.nav{margin:16px 0}.nav .nav-link{background:#fff;border:1px solid #8F8F8F;border-radius:68px;color:#8f8f8f;font-size:12px;font-weight:700;line-height:16px;margin-right:8px;padding:8px 16px;width:-moz-fit-content;width:fit-content;flex:none;cursor:pointer}.nav .nav-link.active{background:#F5F8FF;color:#007aff;border-color:#007aff}.h-150{max-height:150px}.h-150 .mat-form-field-flex{height:150px}.c-btn{font-style:normal;font-weight:700;font-size:12px;line-height:24px;text-decoration-line:underline;color:#007aff}.info{font-family:Inter;font-style:normal;font-weight:500;font-size:12px;line-height:16px;color:#a0a5b0!important}.uploader label{width:100%;height:150px;border:1px solid #8F8F8F;display:flex;align-items:center;justify-content:center}.h-50{height:50px!important}progress::-webkit-progress-value{background:#007AFF}progress{color:#007aff}progress::-moz-progress-bar{background:#007AFF}\n"],encapsulation:2}),i})();function Ie(i,l){1&i&&(e.TgZ(0,"div",3),e._uU(1,"No slides found"),e.qZA())}function Oe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.reorderMode?o.saveOrder():o.reorderSlides())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("reorder-link",!t.reorderMode),e.xp6(1),e.hij(" ",t.reorderMode?"Save":"Reorder"," ")}}function Ne(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.cancelReorder())}),e._uU(1," Cancel "),e.qZA()}}function De(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openAddSlideForm(!1))}),e._uU(1," Create Slide "),e.qZA()}}function Le(i,l){1&i&&(e.TgZ(0,"div",20),e.O4$(),e.TgZ(1,"svg",21),e._UZ(2,"path",22),e.qZA()())}function Ye(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openAddSlideForm(!1,o))}),e.O4$(),e.TgZ(1,"svg",24),e._UZ(2,"path",25),e.qZA()()}}function Je(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,r=e.oxw(2);return e.KtG(r.delete(o))}),e.O4$(),e.TgZ(1,"svg",26),e._UZ(2,"path",27)(3,"path",28)(4,"path",29)(5,"path",30)(6,"path",31),e.qZA()()}}function Pe(i,l){if(1&i&&(e.TgZ(0,"div",14),e.YNc(1,Le,3,0,"div",15),e.TgZ(2,"div",16),e._uU(3),e.qZA(),e.TgZ(4,"div",17),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.TgZ(7,"div",18),e.YNc(8,Ye,3,0,"button",19),e.YNc(9,Je,7,0,"button",19),e.qZA()()),2&i){const t=l.$implicit,n=l.index,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.reorderMode),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.hij(" ",e.lcZ(6,5,t.name)," "),e.xp6(3),e.Q6J("ngIf",!o.reorderMode),e.xp6(1),e.Q6J("ngIf",!o.reorderMode)}}function Qe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5),e.YNc(2,Oe,2,3,"button",6),e.YNc(3,Ne,2,0,"button",7),e.YNc(4,De,2,0,"button",8),e.qZA(),e.TgZ(5,"div",9),e.NdJ("cdkDropListDropped",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.drop(o))}),e.YNc(6,Pe,10,7,"div",10),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",(null==t.slides?null:t.slides.length)>=2),e.xp6(1),e.Q6J("ngIf",t.reorderMode),e.xp6(1),e.Q6J("ngIf",!t.reorderMode),e.xp6(2),e.Q6J("ngForOf",t.slides)}}let Re=(()=>{class i{constructor(t,n,o,r,a,m){this.apiService=t,this.dialog=n,this.errorHandlingService=o,this.alertService=r,this.activeRoute=a,this.router=m,this.apiCallActive=!1,this.rootComments=[],this.slides=[],this.orderedSlides=[],this.reorderMode=!1,this.activeRoute.params.subscribe({next:({id:x})=>{this.courseId=x,this.getSlides()}})}ngOnInit(){}getSlides(){let t=p.d.slide.replace(":id",this.courseId);this.apiCallActive=!0,this.apiService.get(t).subscribe({next:n=>{this.apiCallActive=!1,this.slides=n.slides||[],this.orderedSlides=[...this.slides]},error:n=>{this.apiCallActive=!1,this.errorHandlingService.handle(n)}})}openAddSlideForm(t,n={}){this.addSlideDialogRef=this.dialog.open(Ee,{minWidth:"320px",width:"440px",disableClose:!0,data:{isViewOnly:t,...n,totalSlides:this.slides.length,courseId:this.courseId}}),this.addSlideDialogRef.afterClosed().subscribe({next:o=>{o&&(this.router.navigate(["/dashboard/course/details/"+this.courseId],{skipLocationChange:!0}),this.getSlides())}})}delete(t){this.confirmDialogRef=this.dialog.open(w.$,{minWidth:"320px",width:"585px",disableClose:!0,data:{slide:this.slides[t],heading:"Delete slide",message:"Are you sure you want to delete this slide?"}}),this.confirmDialogRef.afterClosed().subscribe({next:n=>{n&&this.deleteSlide(this.slides[t]._id)}})}deleteSlide(t){this.apiService.put(p.d.updateSlide.replace(":id",this.courseId).replace(":slideid",t),{isDeleted:!0}).subscribe({next:n=>{this.slides=this.slides.filter(o=>o._id!=t),this.alertService.notify("Slide deleted successfully")},error:n=>this.errorHandlingService.handle(n)})}reorderSlides(){this.reorderMode=!this.reorderMode}cancelReorder(){this.reorderMode=!1,this.slides=[...this.orderedSlides]}saveOrder(){let t=p.d.reorderSildes.replace(":id",this.courseId);this.apiCallActive=!0,this.apiService.put(t,{slides:this.slides.map(n=>n._id)}).subscribe({next:n=>{this.apiCallActive=!1,this.reorderMode=!1,this.orderedSlides=[...this.slides],this.alertService.notify(n.message)},error:n=>{this.apiCallActive=!1,this.errorHandlingService.handle(n)}})}drop(t){(0,T.bA)(this.slides,t.previousIndex,t.currentIndex)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.a),e.Y36(g.uw),e.Y36(C.r),e.Y36(b.c),e.Y36(_.gz),e.Y36(_.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["slide-list"]],decls:3,vars:2,consts:[[1,"slide-list-wrapper"],["class","no-data",4,"ngIf"],["class","reorder-wrapper",4,"ngIf"],[1,"no-data"],[1,"reorder-wrapper"],[1,"ml-auto","my-10"],["mat-raised-button","","color","primary",3,"reorder-link","click",4,"ngIf"],["mat-raised-button","","color","default",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","class","create-link",3,"click",4,"ngIf"],["cdkDropList","",1,"slide-list",3,"cdkDropListDropped"],["class","slide-box","cdkDrag","",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","default",3,"click"],["mat-raised-button","","color","primary",1,"create-link",3,"click"],["cdkDrag","",1,"slide-box"],["class","drag-icon",4,"ngIf"],[1,"mx-24","drag-index"],[1,"w-100","drag-content"],[1,"w-150px","delete-icon","flex","flex-row"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"drag-icon"],["cdkDragHandle","","width","7","height","40","viewBox","0 0 7 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M1.27277 10.8182C1.97568 10.8182 2.5455 11.388 2.5455 12.0909C2.5455 12.7938 1.97568 13.3636 1.27277 13.3636C0.569863 13.3636 4.48899e-05 12.7938 4.48899e-05 12.0909C4.48899e-05 11.388 0.569864 10.8182 1.27277 10.8182ZM2.5455 6.99999C2.5455 6.29708 1.97568 5.72726 1.27277 5.72726C0.569864 5.72726 4.48899e-05 6.29708 4.48899e-05 6.99999C4.48899e-05 7.7029 0.569863 8.27272 1.27277 8.27272C1.97568 8.27272 2.5455 7.7029 2.5455 6.99999ZM2.54545 1.90908C2.54545 1.20617 1.97564 0.636353 1.27273 0.636353C0.569819 0.636353 3.07227e-08 1.20617 0 1.90908C-3.07264e-08 2.61199 0.569819 3.18181 1.27273 3.18181C1.97564 3.18181 2.54545 2.61199 2.54545 1.90908ZM7.00004 1.90908C7.00004 1.20617 6.43023 0.636353 5.72732 0.636353C5.02441 0.636353 4.45459 1.20617 4.45459 1.90908C4.45459 2.61199 5.02441 3.18181 5.72732 3.18181C6.43023 3.18181 7.00004 2.61199 7.00004 1.90908ZM7.00004 6.99999C7.00004 6.29708 6.43023 5.72726 5.72732 5.72726C5.02441 5.72726 4.45459 6.29708 4.45459 6.99999C4.45459 7.7029 5.02441 8.27272 5.72732 8.27272C6.43023 8.27272 7.00004 7.7029 7.00004 6.99999ZM5.72732 10.8182C6.43023 10.8182 7.00004 11.388 7.00004 12.0909C7.00004 12.7938 6.43023 13.3636 5.72732 13.3636C5.02441 13.3636 4.45459 12.7938 4.45459 12.0909C4.45459 11.388 5.02441 10.8182 5.72732 10.8182Z","fill","#BFBFBF"],["mat-icon-button","",3,"click"],["width","17","height","17","viewBox","0 0 17 17","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12.727 7.1703L9.82971 4.27301M1.5 15.5L3.95137 15.2276C4.25087 15.1943 4.40062 15.1777 4.54059 15.1324C4.66477 15.0922 4.78295 15.0354 4.89191 14.9635C5.01473 14.8826 5.12127 14.776 5.33436 14.5629L14.9 4.99734C15.7 4.19727 15.7 2.90011 14.9 2.10005C14.0999 1.29998 12.8027 1.29998 12.0027 2.10005L2.43707 11.6656C2.22399 11.8787 2.11745 11.9853 2.03646 12.1081C1.9646 12.2171 1.9078 12.3352 1.8676 12.4594C1.82229 12.5994 1.80565 12.7491 1.77237 13.0486L1.5 15.5Z","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["width","18","height","18","viewBox","0 0 18 18","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15.3749 4.5H2.62488","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M14.125 6.375L13.78 11.5493C13.6473 13.5405 13.5809 14.5361 12.9322 15.1431C12.2834 15.75 11.2856 15.75 9.29001 15.75H8.70999C6.71439 15.75 5.71659 15.75 5.06783 15.1431C4.41907 14.5361 4.3527 13.5405 4.21996 11.5493L3.875 6.375","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M7.125 8.25L7.5 12","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M10.875 8.25L10.5 12","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M4.875 4.5C4.91691 4.5 4.93786 4.5 4.95686 4.49952C5.57444 4.48387 6.11927 4.09118 6.32941 3.51024C6.33588 3.49237 6.3425 3.47249 6.35576 3.43273L6.42857 3.21429C6.49073 3.02781 6.52181 2.93457 6.56304 2.8554C6.72751 2.53955 7.03181 2.32023 7.38346 2.26407C7.4716 2.25 7.56988 2.25 7.76645 2.25H10.2336C10.4301 2.25 10.5284 2.25 10.6165 2.26407C10.9682 2.32023 11.2725 2.53955 11.437 2.8554C11.4782 2.93457 11.5093 3.02781 11.5714 3.21429L11.6442 3.43273C11.6575 3.47244 11.6641 3.49238 11.6706 3.51024C11.8807 4.09118 12.4256 4.48387 13.0431 4.49952C13.0621 4.5 13.0831 4.5 13.125 4.5","stroke","#7E7E7E","stroke-width","1.5"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ie,2,0,"div",1),e.YNc(2,Qe,7,4,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!(null!=n.slides&&n.slides.length)),e.xp6(1),e.Q6J("ngIf",null==n.slides?null:n.slides.length))},dependencies:[d.sg,d.O5,Z.lW,T.Wj,T.Zt,T.Bh,d.rS],styles:[".slide-list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}.create-link[_ngcontent-%COMP%], .reorder-link[_ngcontent-%COMP%]{font-family:Plus Jakarta Sans;font-size:14px;font-weight:700;text-align:left;color:#007aff;background-color:transparent!important;box-shadow:none!important;border:0!important}.reorder-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:100%}.reorder-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.slide-list[_ngcontent-%COMP%]{width:100%;max-width:100%;display:block;justify-content:space-between;background:white;border-radius:4px;box-sizing:border-box}.slide-box[_ngcontent-%COMP%]{padding:16px 24px;background-color:#f9f9f9;color:#000000de;display:flex;border-radius:8px;flex-direction:row;align-items:center;margin-bottom:4px;justify-content:space-between;box-sizing:border-box;font-size:14px;font-weight:500}.slide-box[_ngcontent-%COMP%]   .drag-icon[_ngcontent-%COMP%]{cursor:move}.container[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.drag-icon[_ngcontent-%COMP%]{position:relative}.drag-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.slide-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .slide-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),i})(),He=(()=>{class i{transform(t){const n=t.split(" ");return`${n[0].charAt(0).toUpperCase()}${n[n.length-1].charAt(0).toUpperCase()}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"initials",type:i,pure:!0}),i})();function je(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",3)(2,"div",4),e._uU(3),e.ALo(4,"initials"),e.qZA(),e.TgZ(5,"div",5)(6,"h5",6),e._uU(7),e.ALo(8,"titlecase"),e.qZA(),e.TgZ(9,"span",25),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"button",26),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.delete(r))}),e.O4$(),e.TgZ(13,"svg",9),e._UZ(14,"path",10)(15,"path",11)(16,"path",12)(17,"path",13)(18,"path",14),e.qZA()(),e.kcU(),e.TgZ(19,"div",15)(20,"div",16)(21,"p"),e._uU(22),e.qZA()()()()()()}if(2&i){const t=l.$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,4,t.author.fullName)," "),e.xp6(4),e.Oqu(e.lcZ(8,6,t.author.fullName)),e.xp6(3),e.Oqu(e.xi3(11,8,t.createdAt,"dd MMM yyyy hh:mm a")),e.xp6(12),e.Oqu(t.text)}}function ze(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4),e._uU(3),e.ALo(4,"initials"),e.qZA(),e.TgZ(5,"div",5)(6,"h5",6),e._uU(7),e.ALo(8,"titlecase"),e.qZA(),e.TgZ(9,"span",7),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.delete(o.comment))}),e.O4$(),e.TgZ(13,"svg",9),e._UZ(14,"path",10)(15,"path",11)(16,"path",12)(17,"path",13)(18,"path",14),e.qZA()(),e.kcU(),e.TgZ(19,"div",15)(20,"div",16)(21,"p"),e._uU(22),e.qZA()(),e.YNc(23,je,23,11,"div",17),e.TgZ(24,"div",18)(25,"form",19)(26,"div",20)(27,"mat-form-field",21),e._UZ(28,"textarea",22),e.qZA()(),e.TgZ(29,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addComment(o.comment._id))}),e._uU(30," Reply "),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,7,t.comment.author.fullName)," "),e.xp6(4),e.hij("",e.lcZ(8,9,t.comment.author.fullName)," "),e.xp6(3),e.Oqu(e.xi3(11,11,t.comment.createdAt,"dd MMM yyyy hh:mm a")),e.xp6(12),e.Oqu(t.comment.text),e.xp6(1),e.Q6J("ngForOf",t.comment.children),e.xp6(2),e.Q6J("formGroup",t.replyForm),e.xp6(4),e.Q6J("disabled",t.replyForm.invalid)}}function Be(i,l){1&i&&(e.TgZ(0,"div")(1,"div",27),e._uU(2,"No comments found"),e.qZA()())}let Ve=(()=>{class i{constructor(t,n,o,r,a){this.apiService=t,this.dialog=n,this.fb=o,this.errorHandlingService=r,this.alertService=a,this.apiCallActive=!1,this.replyForm=this.fb.group({comment:["",[s.kI.required]]})}getComments(){this.apiCallActive=!0,this.apiService.get(p.d.getComments.replace(":id",this.courseId)).subscribe({next:({comments:t})=>{this.apiCallActive=!1,this.comment=t?.length?t[0]:{}},error:t=>{this.apiCallActive=!1,this.errorHandlingService.handle(t)}})}ngOnInit(){console.log(this.comment),this.getComments()}delete(t){this.confirmDialogRef=this.dialog.open(w.$,{minWidth:"320px",width:"585px",disableClose:!0,data:{heading:"Delete slide",message:"Are you sure you want to delete this comment?"}}),this.confirmDialogRef.afterClosed().subscribe({next:n=>{n&&this.deleteComment(t._id)}})}deleteComment(t){this.apiService.put(p.d.deleteComment.replace(":id",this.courseId).replace(":commentId",t),{isDeleted:!0}).subscribe({next:n=>{this.comment._id===t?this.comment=null:this.comment.children?.length&&this.comment.children.forEach((o,r)=>{o._id===t&&this.comment.children.splice(r,1)})},error:n=>this.errorHandlingService.handle(n)})}addComment(t){this.replyForm.valid&&this.apiService.post(p.d.addComment.replace(":id",this.courseId),{text:this.replyForm.value.comment,parent:t}).subscribe({next:n=>{console.log(n);let o=n.comment;o.author={_id:o.author,fullName:"Admin"},this.comment.children.push(o),this.replyForm.controls.comment.setValue("")},error:n=>this.errorHandlingService.handle(n)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.a),e.Y36(g.uw),e.Y36(s.qu),e.Y36(C.r),e.Y36(b.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["comment"]],inputs:{comment:"comment",courseId:"courseId"},decls:2,vars:2,consts:[["class","comment",4,"ngIf"],[4,"ngIf"],[1,"comment"],[1,"user-banner"],[1,"avatar"],[1,"user"],[1,"name"],[1,"is-mute","ml-auto","createdAt"],["mat-icon-button","",1,"",3,"click"],["width","18","height","18","viewBox","0 0 18 18","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15.3749 4.5H2.62488","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M14.125 6.375L13.78 11.5493C13.6473 13.5405 13.5809 14.5361 12.9322 15.1431C12.2834 15.75 11.2856 15.75 9.29001 15.75H8.70999C6.71439 15.75 5.71659 15.75 5.06783 15.1431C4.41907 14.5361 4.3527 13.5405 4.21996 11.5493L3.875 6.375","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M7.125 8.25L7.5 12","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M10.875 8.25L10.5 12","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M4.875 4.5C4.91691 4.5 4.93786 4.5 4.95686 4.49952C5.57444 4.48387 6.11927 4.09118 6.32941 3.51024C6.33588 3.49237 6.3425 3.47249 6.35576 3.43273L6.42857 3.21429C6.49073 3.02781 6.52181 2.93457 6.56304 2.8554C6.72751 2.53955 7.03181 2.32023 7.38346 2.26407C7.4716 2.25 7.56988 2.25 7.76645 2.25H10.2336C10.4301 2.25 10.5284 2.25 10.6165 2.26407C10.9682 2.32023 11.2725 2.53955 11.437 2.8554C11.4782 2.93457 11.5093 3.02781 11.5714 3.21429L11.6442 3.43273C11.6575 3.47244 11.6641 3.49238 11.6706 3.51024C11.8807 4.09118 12.4256 4.48387 13.0431 4.49952C13.0621 4.5 13.0831 4.5 13.125 4.5","stroke","#7E7E7E","stroke-width","1.5"],[1,"content"],[1,"flex","flex-row"],["class","reply-body comment",4,"ngFor","ngForOf"],[1,"footer"],[3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row",1,"h-150"],["fxFlex","100"],["matInput","","rows","3","formControlName","comment","trim","","autocomplete","off"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"reply-body","comment"],[1,"is-mute","createdAt","ml-auto"],["mat-icon-button","",3,"click"],[1,"no-data","flex-start"]],template:function(t,n){1&t&&(e.YNc(0,ze,31,14,"div",0),e.YNc(1,Be,3,0,"div",1)),2&t&&(e.Q6J("ngIf",n.comment&&(null==n.comment?null:n.comment._id)),e.xp6(1),e.Q6J("ngIf",!n.comment||!n.comment._id))},dependencies:[d.sg,d.O5,f.KE,S.Nt,Z.lW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.rS,d.uU,He],styles:[".ml-auto{margin-left:auto}.w-100{width:100%}.content .name{font-size:14px;font-weight:700;line-height:18px;letter-spacing:0px;color:#1d1d1d}.content .footer{display:flex;flex-direction:column;align-items:flex-start}.content .footer textarea{max-width:500px;width:100%;padding:8px 16px;height:96px;border:1px solid #E9EBF0;border-radius:8px}.content .footer>div{display:flex;flex-direction:row;gap:10px}::placeholder{padding:8px 16px}.content p{font-size:14px;font-weight:400;line-height:24px;letter-spacing:0px;color:#6d6d6d;margin-bottom:0}.reply{background-color:transparent!important;width:-moz-fit-content;width:fit-content;border:0!important;font-size:14px!important;font-weight:700!important;color:#007aff!important;box-shadow:none!important;padding:0!important}.createdAt{font-size:11px;font-weight:600;line-height:24px;font-style:italic;margin-right:20px}.mat-card{background-color:transparent}.mat-card .comment{border-radius:8px}.comment .user-banner{display:flex;justify-content:space-between;background:#F9F9F9;padding:16px 0;border-radius:8px}.mat-form-field-infix{width:430px!important;height:100px!important}.mat-form-field-flex{line-height:25px;border:0!important;padding:0!important;width:430px!important;height:100px!important}\n"],encapsulation:2}),i})();var u=c(7155),$e=c(3238),R=c(7957);function Ge(i,l){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.email),e.xp6(1),e.hij(" ",t.email+(t.fullName||"")," ")}}function Ke(i,l){if(1&i&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.enrollForm.controls.user.value?"No match found":"Type to search for users"," ")}}function We(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Required "),e.qZA())}let Xe=(()=>{class i{constructor(t,n,o,r,a,m,x,y,M){this.matDialog=t,this.data=n,this.apiService=o,this.errorHandlingService=r,this.matcher=a,this.fb=m,this.http=x,this.alertService=y,this.activeRoute=M,this.apiCallActive=!1,this.filteredUsers=[],this.courseId=n.courseId,this.enrollForm=this.fb.group({user:["",s.kI.required]}),this.enrollForm.controls.user.valueChanges.pipe((0,U.b)(500)).subscribe({next:q=>{this.getUsersToEnroll(q)}})}displayFn(t){return t?t.email:""}getUsersToEnroll(t){let n=p.d.getUsersToEnroll.replace(":id",this.courseId);t?(n+="?search="+t.toLowerCase(),this.apiService.get(n).subscribe({next:o=>{this.filteredUsers=o.users},error:o=>{this.apiCallActive=!1,this.errorHandlingService.handle(o)}})):this.filteredUsers=[]}changed(t){console.log(t),this.selectedOption=t.value}ngOnInit(){}enrollUser(){this.enrollForm.valid&&this.selectedOption==this.enrollForm.value.user&&this.apiService.post(p.d.courseEnrollment.replace(":id",this.courseId),{user:this.enrollForm.value.user}).subscribe({next:t=>{this.alertService.notify(t.message),this.matDialog.close(t)},error:t=>this.errorHandlingService.handle(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.so),e.Y36(g.WI),e.Y36(v.a),e.Y36(C.r),e.Y36(I.d),e.Y36(s.qu),e.Y36(h.eN),e.Y36(b.c),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-new-enrollment"]],decls:28,vars:6,consts:[["fxLayout","column",1,"container-div"],["fxLayoutAlign","end flex-end",1,"mat-accent-bg","m-0"],["fxFlex","100","fxLayout","row","fxLayoutAlign","space-between flex-end",1,"mat-toolbar-header"],[1,"title","dialog-title"],["aria-label","Close dialog","mat-button","",1,"mat-icon-button","mat-button",3,"click"],[1,"mat-button-wrapper"],["role","img","aria-hidden","true",1,"mat-icon","material-icons"],[1,"mt-10"],["fxLayout","column",1,"content","p-20","mt-20"],["fx-layout","column",3,"formGroup"],["fxLayout","column","fxLayout.gt-xs","row"],["type","text","matInput","","formControlName","user",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["disabled","",4,"ngIf"],[4,"ngIf"],["fxLayoutAlign","center",1,"mat-accent-bg","m-0","mt-12"],["fxlayout","row","fxLayoutAlign","flex-end","fxFlex","100",1,"mat-toolbar-footer","action-buttons"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-raised-button","",1,"mr-20",3,"click"],[3,"value"],["disabled",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"div",2)(3,"span",3),e._uU(4,"Enroll User"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.matDialog.close()}),e.TgZ(6,"span",5)(7,"mat-icon",6),e._uU(8,"close"),e.qZA()()()()(),e._UZ(9,"mat-divider",7),e.TgZ(10,"div",8)(11,"form",9)(12,"div",10)(13,"mat-form-field")(14,"mat-label"),e._uU(15,"User "),e.qZA(),e._UZ(16,"input",11),e.TgZ(17,"mat-autocomplete",12,13),e.NdJ("optionSelected",function(r){return n.changed(r.option)}),e.YNc(19,Ge,2,2,"mat-option",14),e.YNc(20,Ke,2,1,"mat-option",15),e.qZA(),e.YNc(21,We,2,0,"mat-error",16),e.qZA()()()(),e.TgZ(22,"mat-toolbar",17)(23,"div",18)(24,"button",19),e.NdJ("click",function(){return n.enrollUser()}),e._uU(25,"Enroll"),e.qZA(),e.TgZ(26,"button",20),e.NdJ("click",function(){return n.matDialog.close()}),e._uU(27,"Cancel"),e.qZA()()()()),2&t){const o=e.MAs(18);e.xp6(11),e.Q6J("formGroup",n.enrollForm),e.xp6(5),e.Q6J("matAutocomplete",o),e.xp6(3),e.Q6J("ngForOf",n.filteredUsers),e.xp6(1),e.Q6J("ngIf",!n.filteredUsers.length),e.xp6(1),e.Q6J("ngIf",n.selectedOption!=n.enrollForm.controls.user.value||n.enrollForm.controls.user.hasError("required")),e.xp6(3),e.Q6J("disabled",n.enrollForm.invalid||n.selectedOption!=n.enrollForm.controls.user.value||n.apiCallActive)}},dependencies:[d.sg,d.O5,f.TO,f.KE,f.hX,S.Nt,Z.lW,D.d,O.Ye,P.Hw,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,$e.ey,R.XC,R.ZL]}),i})();function et(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openEnrollUserForm())}),e._uU(2," Enroll new "),e.qZA()()}}function tt(i,l){if(1&i&&(e.TgZ(0,"p",6),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" There is no ","paid"==t.courseDetails.type?"enrollment requested":"user enrolled"," yet!\n")}}function nt(i,l){1&i&&(e.TgZ(0,"th",18),e._uU(1,"#"),e.qZA())}function it(i,l){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&i){const t=l.index;e.xp6(1),e.hij(" ",t+1," ")}}function ot(i,l){1&i&&(e.TgZ(0,"th",18),e._uU(1," User Name "),e.qZA())}function lt(i,l){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"titlecase"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",null!=t&&t.enrollmentRequestedBy?e.lcZ(2,1,null==t||null==t.enrollmentRequestedBy?null:t.enrollmentRequestedBy.fullName):e.lcZ(3,3,null==t||null==t.user?null:t.user.fullName)," ")}}function rt(i,l){1&i&&(e.TgZ(0,"th",18),e._uU(1," Email "),e.qZA())}function st(i,l){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",null!=t&&t.enrollmentRequestedBy?null==t||null==t.enrollmentRequestedBy?null:t.enrollmentRequestedBy.email:null==t||null==t.user?null:t.user.email," ")}}function at(i,l){1&i&&(e.TgZ(0,"th",18),e._uU(1," Enrolled On "),e.qZA())}function ct(i,l){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.enrolledOn,"dd/MM/yyyy")," ")}}function dt(i,l){1&i&&(e.TgZ(0,"th",18),e._uU(1," Request Status "),e.qZA())}function mt(i,l){if(1&i&&(e.TgZ(0,"td",19),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.requestStatus)," ")}}function ut(i,l){1&i&&(e.ynx(0,20),e.YNc(1,dt,2,0,"th",9),e.YNc(2,mt,3,3,"td",10),e.BQk())}function pt(i,l){1&i&&(e.TgZ(0,"th",18),e._uU(1," Actions "),e.qZA())}function gt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"td",19)(1,"button",21),e.NdJ("click",function(){const o=e.CHM(t),r=o.index,a=o.$implicit,m=e.oxw(2);return e.KtG(m.openConfirmDialog(r,a))}),e.O4$(),e.TgZ(2,"svg",22),e._UZ(3,"path",23)(4,"path",24)(5,"path",25)(6,"path",26)(7,"path",27),e.qZA()()()}}function ft(i,l){1&i&&e._UZ(0,"tr",28)}function ht(i,l){1&i&&e._UZ(0,"tr",29)}function _t(i,l){if(1&i&&(e.TgZ(0,"div")(1,"table",7),e.ynx(2,8),e.YNc(3,nt,2,0,"th",9),e.YNc(4,it,2,1,"td",10),e.BQk(),e.ynx(5,11),e.YNc(6,ot,2,0,"th",9),e.YNc(7,lt,4,5,"td",10),e.BQk(),e.ynx(8,12),e.YNc(9,rt,2,0,"th",9),e.YNc(10,st,2,1,"td",10),e.BQk(),e.ynx(11,13),e.YNc(12,at,2,0,"th",9),e.YNc(13,ct,3,4,"td",10),e.BQk(),e.YNc(14,ut,3,0,"ng-container",14),e.ynx(15,15),e.YNc(16,pt,2,0,"th",9),e.YNc(17,gt,8,0,"td",10),e.BQk(),e.YNc(18,ft,1,0,"tr",16),e.YNc(19,ht,1,0,"tr",17),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("ngIf","paid"==(null==t.courseDetails?null:t.courseDetails.type)),e.xp6(4),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let xt=(()=>{class i{constructor(t,n,o,r){this.apiService=t,this.dialog=n,this.errorHandlingService=o,this.alertService=r,this.apiCallActive=!0}ngOnInit(){this.displayedColumns="paid"==this.courseDetails?.type?["id","user","email","enrolledOn","requestStatus","action"]:["id","user","email","enrolledOn","action"],this.selectedCourseId=this.courseDetails._id,this.getEnrolledUsers()}getEnrolledUsers(){this.apiCallActive=!0,this.apiService.get(p.d.getEnrollments.replace(":id",this.selectedCourseId)).subscribe({next:t=>{this.apiCallActive=!1,this.dataSource=new u.by(t.enrollments||[])},error:t=>{this.apiCallActive=!1,this.errorHandlingService.handle(t)}})}openConfirmDialog(t,n,o={}){this.addEnrollmentDialogRef=this.dialog.open(w.$,{minWidth:"320px",width:"585px",disableClose:!0,data:{enrollment:n,heading:"Remove Enrollment",message:"Are you sure you want to remove this enrollment?"}}),this.addEnrollmentDialogRef.afterClosed().subscribe({next:r=>{r&&this.manageEnrollment(t,n)}})}manageEnrollment(t,n){console.log(n),this.apiService.put(p.d.manageEnrollment.replace(":id",this.selectedCourseId).replace(":enrollmentId",n._id),{isDeleted:!0}).subscribe({next:o=>{this.dataSource.data.splice(t,1),this.dataSource=new u.by(this.dataSource.data||[])},error:o=>this.errorHandlingService.handle(o)})}openEnrollUserForm(){this.addEnrollmentDialogRef=this.dialog.open(Xe,{minWidth:"320px",width:"585px",disableClose:!0,data:{enrollmentId:this.selectedCourseId}}),this.addEnrollmentDialogRef.afterClosed().subscribe({next:t=>{t&&this.getEnrolledUsers()}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.a),e.Y36(g.uw),e.Y36(C.r),e.Y36(b.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["manage-enrollment"]],inputs:{courseDetails:"courseDetails"},decls:4,vars:3,consts:[[1,"flex-row"],["class","title-buttons ",4,"ngIf"],["class","no-data flex-start",4,"ngIf"],[4,"ngIf"],[1,"title-buttons"],["mat-raised-button","","color","primary",3,"click"],[1,"no-data","flex-start"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","email"],["matColumnDef","enrolledOn"],["matColumnDef","requestStatus",4,"ngIf"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["matColumnDef","requestStatus"],["mat-icon-button","","color","warn","aria-label","delete",3,"click"],["width","18","height","18","viewBox","0 0 18 18","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M15.3749 4.5H2.62488","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M14.125 6.375L13.78 11.5493C13.6473 13.5405 13.5809 14.5361 12.9322 15.1431C12.2834 15.75 11.2856 15.75 9.29001 15.75H8.70999C6.71439 15.75 5.71659 15.75 5.06783 15.1431C4.41907 14.5361 4.3527 13.5405 4.21996 11.5493L3.875 6.375","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M7.125 8.25L7.5 12","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M10.875 8.25L10.5 12","stroke","#7E7E7E","stroke-width","1.5","stroke-linecap","round"],["d","M4.875 4.5C4.91691 4.5 4.93786 4.5 4.95686 4.49952C5.57444 4.48387 6.11927 4.09118 6.32941 3.51024C6.33588 3.49237 6.3425 3.47249 6.35576 3.43273L6.42857 3.21429C6.49073 3.02781 6.52181 2.93457 6.56304 2.8554C6.72751 2.53955 7.03181 2.32023 7.38346 2.26407C7.4716 2.25 7.56988 2.25 7.76645 2.25H10.2336C10.4301 2.25 10.5284 2.25 10.6165 2.26407C10.9682 2.32023 11.2725 2.53955 11.437 2.8554C11.4782 2.93457 11.5093 3.02781 11.5714 3.21429L11.6442 3.43273C11.6575 3.47244 11.6641 3.49238 11.6706 3.51024C11.8807 4.09118 12.4256 4.48387 13.0431 4.49952C13.0621 4.5 13.0831 4.5 13.125 4.5","stroke","#7E7E7E","stroke-width","1.5"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,et,3,0,"div",1),e.qZA(),e.YNc(2,tt,2,1,"p",2),e.YNc(3,_t,20,4,"div",3)),2&t&&(e.xp6(1),e.Q6J("ngIf","private"==n.courseDetails.type),e.xp6(1),e.Q6J("ngIf",!n.apiCallActive&&(null==n.dataSource||null==n.dataSource.filteredData?null:n.dataSource.filteredData.length)<=0),e.xp6(1),e.Q6J("ngIf",!n.apiCallActive&&(null==n.dataSource||null==n.dataSource.filteredData?null:n.dataSource.filteredData.length)>0))},dependencies:[d.O5,Z.lW,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,d.rS,d.uU],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;padding:8px}.flex-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:50%}.flex-row[_ngcontent-%COMP%]   .title-buttons[_ngcontent-%COMP%]{margin-left:auto}table[_ngcontent-%COMP%]{box-shadow:none;border-top:0}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-radius:8px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{margin-bottom:10px;font-size:13px;font-weight:700;line-height:22px;color:#3f3f3f;background-color:#f9f9f9}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px;word-break:break-all}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:100px;align-content:flex-end}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   .mat-icon-button[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child   .mat-icon-button[_ngcontent-%COMP%]{width:25px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fff!important;font-size:12px;font-weight:600;color:#8f8f8f;border-top:0}table[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{line-height:13px;font-size:16px}tr.mat-row[_ngcontent-%COMP%]{border:white solid 4px;border-radius:8px}"]}),i})();function vt(i,l){1&i&&(e.TgZ(0,"div",5)(1,"h1",6),e._uU(2," Enrollment Requests "),e.qZA()())}function Ct(i,l){1&i&&e._UZ(0,"mat-divider",7)}function bt(i,l){1&i&&(e.TgZ(0,"p",8),e._uU(1," There is no enrollment requests yet!\n"),e.qZA())}function Zt(i,l){1&i&&(e.TgZ(0,"th",20),e._uU(1,"#"),e.qZA())}function yt(i,l){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=l.index;e.xp6(1),e.hij(" ",t+1," ")}}function wt(i,l){1&i&&(e.TgZ(0,"th",20),e._uU(1," User Name "),e.qZA())}function Ft(i,l){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t||null==t.enrollmentRequestedBy?null:t.enrollmentRequestedBy.fullName)," ")}}function Tt(i,l){1&i&&(e.TgZ(0,"th",20),e._uU(1," Email "),e.qZA())}function St(i,l){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",null==t||null==t.enrollmentRequestedBy?null:t.enrollmentRequestedBy.email," ")}}function kt(i,l){1&i&&(e.TgZ(0,"th",20),e._uU(1," Requested On "),e.qZA())}function At(i,l){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.enrollmentRequestedOn,"dd/MM/yyyy")," ")}}function Mt(i,l){1&i&&(e.TgZ(0,"th",20),e._uU(1," Actions "),e.qZA())}function qt(i,l){if(1&i){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),r=o.index,a=o.$implicit,m=e.oxw(2);return e.KtG(m.manageRequest(r,a,"Accept"))}),e._UZ(1,"path",25),e.qZA()}}function Ut(i,l){if(1&i){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),r=o.index,a=o.$implicit,m=e.oxw(2);return e.KtG(m.manageRequest(r,a,"Decline"))}),e._UZ(1,"line",26)(2,"line",27),e.qZA()}}function Et(i,l){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.requestStatus))}}function It(i,l){if(1&i&&(e.TgZ(0,"td",22),e.YNc(1,qt,2,0,"svg",23),e.YNc(2,Ut,3,0,"svg",23),e.YNc(3,Et,3,3,"span",4),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf","pending"===t.requestStatus),e.xp6(1),e.Q6J("ngIf","pending"===t.requestStatus),e.xp6(1),e.Q6J("ngIf","pending"!==t.requestStatus)}}function Ot(i,l){1&i&&e._UZ(0,"tr",28)}function Nt(i,l){1&i&&e._UZ(0,"tr",29)}function Dt(i,l){if(1&i&&(e.TgZ(0,"div")(1,"table",9),e.ynx(2,10),e.YNc(3,Zt,2,0,"th",11),e.YNc(4,yt,2,1,"td",12),e.BQk(),e.ynx(5,13),e.YNc(6,wt,2,0,"th",11),e.YNc(7,Ft,3,3,"td",12),e.BQk(),e.ynx(8,14),e.YNc(9,Tt,2,0,"th",11),e.YNc(10,St,2,1,"td",12),e.BQk(),e.ynx(11,15),e.YNc(12,kt,2,0,"th",11),e.YNc(13,At,3,4,"td",12),e.BQk(),e.ynx(14,16),e.YNc(15,Mt,2,0,"th",11),e.YNc(16,It,4,3,"td",17),e.BQk(),e.YNc(17,Ot,1,0,"tr",18),e.YNc(18,Nt,1,0,"tr",19),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let Lt=(()=>{class i{constructor(t,n,o,r){this.apiService=t,this.dialog=n,this.errorHandlingService=o,this.alertService=r,this.apiCallActive=!0}ngOnInit(){this.displayedColumns=["id","user","email","enrollmentRequestedOn","action"],this.selectedCourseId=this.courseDetails._id,this.getEnrollmentRequests()}getEnrollmentRequests(){this.apiCallActive=!0,this.apiService.get(p.d.getEnrollmentRequests.replace(":id",this.selectedCourseId)).subscribe({next:t=>{this.apiCallActive=!1,this.dataSource=new u.by(t.enrollmentRequests||[])},error:t=>{this.apiCallActive=!1,this.errorHandlingService.handle(t)}})}manageRequest(t,n,o){this.openConfirmDialog(t,n,{request:n,action:o,heading:o+" Enrollment Request",message:"Are you sure you want to "+o.toLowerCase()+" this course enrollment request?"})}openConfirmDialog(t,n,o={}){this.manageRequestDialogRef=this.dialog.open(w.$,{minWidth:"320px",width:"585px",disableClose:!0,data:o}),this.manageRequestDialogRef.afterClosed().subscribe({next:r=>{r&&this.manageEnrollRequest(t,n,o)}})}manageEnrollRequest(t,n,o){this.apiService.put(p.d.manageEnrollmentRequest.replace(":id",this.selectedCourseId).replace(":enrollmentId",n._id),{isEnrolled:"accept"==o.action.toLowerCase()}).subscribe({next:r=>{this.getEnrollmentRequests(),this.alertService.notify(r.message)},error:r=>this.errorHandlingService.handle(r)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.a),e.Y36(g.uw),e.Y36(C.r),e.Y36(b.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["manage-enrollment-requests"]],inputs:{courseDetails:"courseDetails"},decls:5,vars:4,consts:[[1,"flex-row"],["class","title",4,"ngIf"],["fxFlex","1 0",4,"ngIf"],["class","no-data flex-start",4,"ngIf"],[4,"ngIf"],[1,"title"],[1,"mat-h1"],["fxFlex","1 0"],[1,"no-data","flex-start"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","email"],["matColumnDef","enrollmentRequestedOn"],["matColumnDef","action"],["mat-cell","","class","action-buttons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"action-buttons"],["class","cursor-pointer","width","54","height","54","viewBox","0 0 54 54","fill","none","xmlns","http://www.w3.org/2000/svg",3,"click",4,"ngIf"],["width","54","height","54","viewBox","0 0 54 54","fill","none","xmlns","http://www.w3.org/2000/svg",1,"cursor-pointer",3,"click"],["d","M19.5 28.5L23.25 32.25L34.5 21","stroke","#06EF7F","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","19.5","y1","19.5","x2","34.5","y2","34.5","stroke","#FF0000","stroke-width","2"],["x1","34.5","y1","19.5","x2","19.5","y2","34.5","stroke","#FF0000","stroke-width","2"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,vt,3,0,"div",1),e.qZA(),e.YNc(2,Ct,1,0,"mat-divider",2),e.YNc(3,bt,2,0,"p",3),e.YNc(4,Dt,19,3,"div",4)),2&t&&(e.xp6(1),e.Q6J("ngIf",(null==n.dataSource||null==n.dataSource.filteredData?null:n.dataSource.filteredData.length)>0),e.xp6(1),e.Q6J("ngIf",(null==n.dataSource||null==n.dataSource.filteredData?null:n.dataSource.filteredData.length)>0),e.xp6(1),e.Q6J("ngIf",!n.apiCallActive&&(null==n.dataSource||null==n.dataSource.filteredData?null:n.dataSource.filteredData.length)<=0),e.xp6(1),e.Q6J("ngIf",!n.apiCallActive&&(null==n.dataSource||null==n.dataSource.filteredData?null:n.dataSource.filteredData.length)>0))},dependencies:[d.O5,D.d,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,d.rS,d.uU],styles:[".flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;padding:8px}.flex-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:50%}.flex-row[_ngcontent-%COMP%]   .title-buttons[_ngcontent-%COMP%]{margin-left:auto}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{align-content:flex-end}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:50px;word-break:break-all}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{text-align:center;width:145px!important}"]}),i})();function Yt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"nav",5)(3,"a",6),e.O4$(),e.TgZ(4,"svg",7),e._UZ(5,"path",8),e.qZA(),e._uU(6,"\xa0 Back "),e.qZA(),e.kcU(),e.TgZ(7,"ol",9)(8,"li",10)(9,"a",11),e._uU(10,"Course List"),e.qZA()(),e.TgZ(11,"li",12),e._uU(12),e.ALo(13,"titlecase"),e.qZA()(),e.TgZ(14,"div",13),e._uU(15," Published "),e.TgZ(16,"mat-slide-toggle",14),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.courseDetails.isPublished=o)}),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.MGl("routerLink","/dashboard/course/list/",null==t.courseDetails?null:t.courseDetails.type,""),e.xp6(9),e.Oqu(e.lcZ(13,3,null==t.courseDetails?null:t.courseDetails.name)),e.xp6(4),e.Q6J("ngModel",t.courseDetails.isPublished)}}function Jt(i,l){1&i&&(e.TgZ(0,"p",15),e._uU(1," Course details not found!\n"),e.qZA())}function Pt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.activeSlide=4)}),e._uU(1," Enrollment Requests "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("active",4==t.activeSlide)}}function Qt(i,l){1&i&&(e.TgZ(0,"div",23),e._UZ(1,"slide-list"),e.qZA())}function Rt(i,l){1&i&&(e.TgZ(0,"div",26),e._uU(1,"No comments found"),e.qZA())}function Ht(i,l){if(1&i&&(e.TgZ(0,"mat-card"),e._UZ(1,"comment",27),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("courseId",t.courseDetails._id)}}function jt(i,l){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,Rt,2,0,"div",24),e.YNc(2,Ht,2,1,"mat-card",25),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(null!=t.rootComments&&t.rootComments.length)),e.xp6(1),e.Q6J("ngForOf",t.rootComments)}}function zt(i,l){if(1&i&&(e.TgZ(0,"div",23),e._UZ(1,"manage-enrollment",28),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("courseDetails",t.courseDetails)}}function Bt(i,l){if(1&i&&(e.TgZ(0,"div",23),e._UZ(1,"manage-enrollment-requests",28),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("courseDetails",t.courseDetails)}}function Vt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",16)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title",17),e._uU(4),e.ALo(5,"titlecase"),e.qZA()(),e.TgZ(6,"mat-card-content")(7,"div",18)(8,"p"),e._uU(9),e.qZA()(),e.TgZ(10,"nav",19)(11,"a",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.activeSlide=1)}),e._uU(12," Slides "),e.qZA(),e.TgZ(13,"a",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.activeSlide=2)}),e._uU(14," Comments "),e.qZA(),e.TgZ(15,"a",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.activeSlide=3)}),e._uU(16," Enrollments "),e.qZA(),e.YNc(17,Pt,2,1,"a",21),e.qZA(),e.YNc(18,Qt,2,0,"div",22),e.YNc(19,jt,3,2,"div",22),e.YNc(20,zt,2,1,"div",22),e.YNc(21,Bt,2,1,"div",22),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,10,null==t.courseDetails?null:t.courseDetails.name)),e.xp6(5),e.Oqu(null==t.courseDetails?null:t.courseDetails.description),e.xp6(2),e.Q6J("active",1==t.activeSlide),e.xp6(2),e.Q6J("active",2==t.activeSlide),e.xp6(2),e.Q6J("active",3==t.activeSlide),e.xp6(2),e.Q6J("ngIf","paid"==(null==t.courseDetails?null:t.courseDetails.type)),e.xp6(1),e.Q6J("ngIf",1==t.activeSlide),e.xp6(1),e.Q6J("ngIf",2==t.activeSlide),e.xp6(1),e.Q6J("ngIf",3==t.activeSlide),e.xp6(1),e.Q6J("ngIf",4==t.activeSlide&&"paid"==(null==t.courseDetails?null:t.courseDetails.type))}}let $t=(()=>{class i{constructor(t,n,o,r,a){this.apiService=t,this.dialog=n,this.errorHandlingService=o,this.alertService=r,this.activeRoute=a,this.activeSlide=1,this.apiCallActive=!0,this.rootComments=[],this.activeRoute.params.subscribe({next:m=>{this.selectedCourseId=m.id,this.getCourseDetails()}})}ngOnInit(){}getCourseDetails(){this.apiCallActive=!0,this.apiService.get(p.d.getCourseDetails+this.selectedCourseId).subscribe({next:t=>{this.apiCallActive=!1,this.courseDetails=t.course,this.rootComments=this.courseDetails.rootComments},error:t=>{this.apiCallActive=!1,this.errorHandlingService.handle(t)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.a),e.Y36(g.uw),e.Y36(C.r),e.Y36(b.c),e.Y36(_.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-details"]],decls:3,vars:3,consts:[["class","row",4,"ngIf"],["class","no-data",4,"ngIf"],["class","",4,"ngIf"],[1,"row"],[1,"col"],["aria-label","breadcrumb",1,"align-items-center"],[1,"back-button","cursor-pointer",3,"routerLink"],["width","7","height","12","viewBox","0 0 7 15","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.38247 10.9393L0.723485 6.37992C0.668185 6.32564 0.629107 6.26684 0.60625 6.20352C0.583024 6.14019 0.571411 6.07234 0.571411 5.99997C0.571411 5.9276 0.583024 5.85976 0.60625 5.79643C0.629107 5.73311 0.668185 5.6743 0.723485 5.62003L5.38247 1.04709C5.5115 0.920441 5.67279 0.857117 5.86634 0.857117C6.05989 0.857117 6.22579 0.924964 6.36404 1.06066C6.50229 1.19636 6.57141 1.35467 6.57141 1.53559C6.57141 1.71652 6.50229 1.87483 6.36404 2.01053L2.29952 5.99997L6.36404 9.98942C6.49307 10.1161 6.55759 10.272 6.55759 10.4573C6.55759 10.6429 6.48846 10.8036 6.35021 10.9393C6.21196 11.075 6.05067 11.1428 5.86634 11.1428C5.68201 11.1428 5.52072 11.075 5.38247 10.9393Z","fill","#3F3F3F"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"link"],["aria-current","page",1,"breadcrumb-item","active"],[1,"flex","flex-row","published","ml-auto","border-0","align-items-center"],["disabled","","name","enablepublished",3,"ngModel","ngModelChange"],[1,"no-data"],[1,""],[1,"h1"],[1,"details-container","line"],["mat-tab-nav-bar","",1,"tab-view"],["mat-tab-link","",3,"active","click"],["mat-tab-link","",3,"active","click",4,"ngIf"],["class","bg-white",4,"ngIf"],[1,"bg-white"],["class","no-data flex-start",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"no-data","flex-start"],[3,"courseId"],[3,"courseDetails"]],template:function(t,n){1&t&&(e.YNc(0,Yt,17,5,"div",0),e.YNc(1,Jt,2,0,"p",1),e.YNc(2,Vt,22,12,"div",2)),2&t&&(e.Q6J("ngIf",n.courseDetails&&(null==n.courseDetails?null:n.courseDetails._id)),e.xp6(1),e.Q6J("ngIf",!(n.apiCallActive||null!=n.courseDetails&&n.courseDetails._id)),e.xp6(1),e.Q6J("ngIf",!n.apiCallActive&&n.courseDetails&&(null==n.courseDetails?null:n.courseDetails._id)))},dependencies:[_.yS,d.sg,d.O5,A.a8,A.dk,A.dn,A.n5,s.JJ,s.On,k.BU,k.Nj,N.Rr,Re,Ve,xt,Lt,d.rS],styles:[".comment{display:grid;gap:14px}.comment .user-banner{display:flex;justify-content:space-between}.comment .user-banner .avatar{height:32px;width:32px;border-radius:50%;vertical-align:middle;display:flex;align-items:center;justify-content:center;margin-right:16px;line-height:20px;color:#fff;background-color:#539cc2}.comment .user-banner .avatar img{max-width:100%;border-radius:50%}.comment .user-banner .user{align-items:center;display:flex;width:100%;margin-bottom:8px;flex-wrap:wrap}.comment .user-banner .user span{font-size:14px;font-weight:400;overflow-wrap:break-word}.comment .user-banner .user .stat{display:flex;position:absolute;right:-2px;bottom:-2px;display:block;width:12px;height:12px;z-index:9;border:2px solid #ffffff;border-radius:100px}.comment .user-banner .user .stat.green{background:#00ba34}.comment .user-banner .user .stat.grey{background:#969696}.comment .user-banner .content{font-size:14px;font-weight:400;overflow-wrap:break-word;flex-basis:100%}.comment .footer{gap:12px;display:flex;align-items:center}.comment .footer .reactions{display:flex;align-items:center;gap:8px}.comment .footer .divider{height:12px;width:1px;background:#e8e8e8}.comment:not(.comment:first-child){padding-bottom:8px}.mat-card-header-text{margin:0!important}.mat-card-header .mat-card-title{font-size:24px}.mat-card{background-color:transparent;box-shadow:none!important}.detailed-container{color:#6d6d6d}.mat-tab-nav-bar{background-color:#fff}.mat-tab-nav-bar .mat-tab-link{padding:16px;min-width:-moz-fit-content;min-width:fit-content;font-weight:700;font-size:14px;color:#8f8f8f}.mat-tab-nav-bar .mat-tab-link.mat-tab-label-active{color:#00cd83}.mat-tab-header{margin-bottom:0!important}.mat-card{background-color:#f9f9f9;padding:16px 24px}.mat-ink-bar{display:none!important}.tab-view{margin:30px -48px 10px;padding:0 48px;border-top:1px solid rgba(0,0,0,.12);border-bottom:0}.tab-view+div{margin:0 -48px;padding:0 48px;border-top:1px solid rgba(0,0,0,.12)}\n"],encapsulation:2}),i})();var Gt=c(5718),Kt=c(4111);const Wt=[{path:"list/:type",component:me},{path:"details/:id",component:$t},{path:"**",redirectTo:"list"}];let Xt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.Bz.forChild(Wt),d.ez,Gt.q,Kt.q,T._t]}),i})()}}]);